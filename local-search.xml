<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>第四章：网络层</title>
    <link href="/computer-network-4/"/>
    <url>/computer-network-4/</url>
    
    <content type="html"><![CDATA[<h1 id="1-网络层提供的两种服务"><a href="#1-网络层提供的两种服务" class="headerlink" title="1.网络层提供的两种服务"></a>1.网络层提供的两种服务</h1><p>网络层向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务。</p><p>网络在发送分组时不需要先建立连接。每一个分组（也就是IP数据报）独立发送，与其前后的分组无关（不进行编号)。网络层不提供服务质量的承诺。也就是说，所传送的分组可能出错、丢失、重复和失序（即不按序到达终点)，当然也不保证分组交付的时限。<strong>因为计算机有很强的差错处理能力，与传统电话有本质上的差别。</strong></p><p><img src="/../img/post/computer-network/4-1.jpg"></p><p><img src="/../img/post/computer-network/4-2.jpg"></p><h1 id="2-网际协议-IP"><a href="#2-网际协议-IP" class="headerlink" title="2.网际协议 IP"></a>2.网际协议 IP</h1><p>网际协议 IP 是 TCP&#x2F;IP 体系中两个最主要的协议之一，也是最重要的互联网标准协议之一。</p><p><strong>与 IP 协议配套使用的还有三个协议：</strong></p><ul><li>地址解析协议ARP（Address Resolution Protocol）</li><li>网际控制报文协议ICMP（Internet Control Message Protocol）</li><li>网际组管理协议IGMP（Internet Group Management Protocol）</li></ul><h2 id="2-1-虚拟互连网络"><a href="#2-1-虚拟互连网络" class="headerlink" title="2.1 虚拟互连网络"></a>2.<strong>1 虚拟互连网络</strong></h2><p>许多计算机网络通过一些路由器进行互连。由于参加互连的计算机网络都使用相同的网际协议 IP（Internet Protocol），因此可以把互连以后的计算机网络看成一个虚拟互连网络。</p><p><img src="/../img/post/computer-network/4-3.jpg"></p><p><img src="/../img/post/computer-network/4-4.jpg"></p><h2 id="2-2-分类的IP地址"><a href="#2-2-分类的IP地址" class="headerlink" title="2.2 分类的IP地址"></a><strong>2.2 分类的IP地址</strong></h2><p><strong>IP地址的编址方法共经过了三个历史阶段：</strong></p><ol><li><strong>分类的IP地址：</strong>这是最基本的编址方法，在1981年就通过了相应的标准协议。</li><li><strong>子网的划分：</strong>这是对最基本的编址方法的改进，其标准RFC 950在1985年通过。</li><li><strong>构成超网：</strong>这是比较新的无分类编址方法。1993年提出后很快就得到推广应用</li></ol><h3 id="2-2-1-IP地址及其表示方法"><a href="#2-2-1-IP地址及其表示方法" class="headerlink" title="2.2.1 IP地址及其表示方法"></a>2.2.<strong>1 IP地址及其表示方法</strong></h3><p>点分十进制法：</p><p>$$<br>IP地址 ::&#x3D; { &lt;网络号&gt;,&lt;主机号&gt; }<br>$$</p><p>一个网络号在整个互联网范围内必须是唯一的。第二个字段是主机号(host-id)，它标志该主机（或路由器)。一台主机号在它前面的网络号所指明的网络范围内必须是唯一的。<strong>由此可见，一个IP地址在整个互联网范围内是唯一的。</strong></p><p><img src="/../img/post/computer-network/4-5.jpg"></p><ul><li>A类、B类和C类地址的网络号字段（在图中这个字段是灰色的）分别为1个、2个和3个字节长，而在网络号字段的最前面有1~3位的类别位，其数值分别规定为0，10和110。</li><li>A类、B类和C类地址的主机号字段分别为3个、2个和1个字节长。</li><li>D类地址（前4位是1110）用于多播（一对多通信)。我们将在4.6节讨论P多播</li><li>E类地址（前4位是1111）保留为以后用。</li></ul><blockquote><p>💡 A、B、C 类地址的区分已经成为历史。</p></blockquote><p>对主机或路由器来说，IP地址都是32位的二进制代码。为了提高可读性，我们常常把32位的IP地址中的每8位插入一个空格（但在机器中并没有这样的空格)。</p><p><img src="/../img/post/computer-network/4-6.jpg"></p><h3 id="2-2-2-常用的三种类别的IP地址"><a href="#2-2-2-常用的三种类别的IP地址" class="headerlink" title="2.2.2 常用的三种类别的IP地址"></a>2.2.<strong>2 常用的三种类别的IP地址</strong></h3><p><img src="/../img/post/computer-network/4-7.jpg"></p><p><strong>IP 地址具有以下一些重要特点：</strong></p><ol><li>每一个IP地址都由网络号和主机号两部分组成。从这个意义上说，IP 地址是一种分等级的地址结构。好处是：第一，IP地址管理机构在分配IP地址时只分配网络号（第一级)，而剩下的主机号（第二级）则由得到该网络号的单位自行分配。这样就方便了IP地址的管理；第二，路由器仅根据目的主机所连接的网络号来转发分组（而不考虑目的主机号)，这样就可以使路由表中的项目数大幅度减少，从而减小了路由表所占的存储空间以及查找路由表的时间。</li><li>实际上IP地址是标志一台主机（或路由器）和一条链路的接口。当一台主机同时连接到两个网络上时，该主机就必须同时具有两个相应的IP地址，其网络号必须是不同的。这种主机称为多归属主机（multihomed host）。</li><li>按照互联网的观点，一个网络是指具有相同网络号 net-id 的主机的集合，因此，用转发器或网桥连接起来的若干个局域网仍为一个网络，因为这些局域网都具有同样的网络号。<strong>具有不同网络号的局域网必须使用路由器进行互连。</strong></li><li>在IP地址中，所有分配到网络号的网络（不管是范围很小的局域网，还是可能覆盖很大地理范围的广域网）都是平等的。所谓平等，是指互联网同等对待每一个IP地址。</li></ol><p><strong>我们应当注意到：</strong></p><ul><li>在同一个局域网上的主机或路由器的IP地址中的网络号必须是一样的。</li><li>用网桥（它只在链路层工作）互连的网段仍然是一个局域网，只能有一个网络号。</li><li>路由器总是具有两个或两个以上的IP地址。即路由器的每一个接口都有一个不同网络号的IP地址。</li><li>当两个路由器直接相连时（例如通过一条租用线路)，在连线两端的接口处，可以分配也可以不分配IP地址。如分配了IP地址，则这一段连线就构成了一种只包含一段线路的特殊“网络”（如图中的 N1，N2 和 N3)。之所以叫做“网络”是因为它有IP地址。但为了节省IP地址资源，对于这种仅由一段连线构成的特殊“网络”，现在也常常不分配IP地址。通常把这样的特殊网络叫做无编号网络或无名网络。</li></ul><p><img src="/../img/post/computer-network/4-8.jpg"></p><h2 id="2-3-IP地址与硬件地址"><a href="#2-3-IP地址与硬件地址" class="headerlink" title="2.3 IP地址与硬件地址"></a><strong>2.3 IP地址与硬件地址</strong></h2><p><strong>物理地址：</strong>数据链路层和物理层使用的地址。</p><p><strong>IP 地址：</strong>网络层以及上层使用的地址，是一种<strong>逻辑地址</strong>。</p><p><img src="/../img/post/computer-network/4-9.jpg"></p><p><img src="/../img/post/computer-network/4-10.jpg"></p><p><strong>这里要强调指出以下几点：</strong></p><ol><li>在 IP 层抽象的互联网上只能看到 IP 数据报。数据报中间经过的两个路由器的 IP 地址并不出现在 IP 数据报的首部中。</li><li>虽然在 IP 数据报首部有源站 IP 地址，但路由器<strong>只根据目的站的IP地址的网络号</strong>进行路由选择。</li><li>在局域网的链路层，只能看见 MAC帧。IP数据报被封装在MAC 帧中。</li><li>尽管互连在一起的网络的硬件地址体系各不相同，但 IP 层抽象的互联网却屏蔽了下层这些很复杂的细节。</li></ol><h2 id="2-4-地址解析协议-ARP"><a href="#2-4-地址解析协议-ARP" class="headerlink" title="2.4 地址解析协议 ARP"></a><strong>2.4 地址解析协议 ARP</strong></h2><p>已经知道了一个机器（主机或路由器）的 IP 地址，需要找出其相应的硬件地址，用地址解析协议 ARP。</p><p><strong>ARP协议的要点：</strong></p><ol><li><p>每一台主机都设有一个 ARP高速缓存（ARP cache），里面有本局域网上的各主机和路由器的 IP 地址到硬件地址的映射表，这些都是该主机目前知道的一些地址。</p></li><li><p>当主机 A 要向本局域网上的某台主机 B 发送 IP 数据报时，就先在其 ARP 高速缓存中查看有无主机 B 的 IP 地址。如有就在 ARP 高速缓存中查出其对应的硬件地址，再把这个硬件地址写入 MAC 帧，然后通过局域网把该MAC帧发往此硬件地址。如果没有，主机 A 就自动运行 ARP。</p><ol><li><p>ARP 进程在本局域网上广播发送一个 ARP 请求分组。</p></li><li><p>在本局域网上的所有主机上运行的 ARP 进程都收到此 ARP 请求分组。</p></li><li><p>主机 B 的 IP 地址与 ARP 请求分组中要查询的 IP 地址一致，就收下这个 ARP 请求分组，并向主机A发送 ARP响应分组，同时在这个 ARP 响应分组中写入自己的硬件地址。</p><p><img src="/../img/post/computer-network/4-11.jpg"></p></li><li><p>主机 A 收到主机 B 的 ARP 响应分组后，就在其 ARP 高速缓存中写入主机 B 的 IP 地址到硬件地址的映射。</p></li></ol></li></ol><p>可见 ARP 高速缓存非常有用。如果不使用 ARP 高速缓存，那么任何一台主机只要进行一次通信，就必须在网络上用广播方式发送ARP请求分组，这就使网络上的通信量大大增加。</p><h2 id="2-5-IP-数据报的格式"><a href="#2-5-IP-数据报的格式" class="headerlink" title="2.5 IP 数据报的格式"></a><strong>2.5 IP 数据报的格式</strong></h2><p>在 TCP&#x2F;IP 的标准中，各种数据格式常常以 32 位（即 4 字节）为单位来描述。</p><p><img src="/../img/post/computer-network/4-12.jpg"></p><p><strong>固定长度：</strong>共20字节</p><p><strong>可选字段：</strong>长度可变</p><h3 id="2-5-1-IP数据报首部的固定部分"><a href="#2-5-1-IP数据报首部的固定部分" class="headerlink" title="2.5.1 IP数据报首部的固定部分"></a>2.5.1 <strong>IP数据报首部的固定部分</strong></h3><ol><li><p><strong>版本：</strong>占 4 位，指 IP 协议的版本，通信双方使用的IP协议的版本必须一致。</p></li><li><p><strong>首部长度：</strong>占 4 位，可表示的最大十进制数值是 15（1111），最小值是 5（0101）.</p></li><li><p><strong>区分服务：</strong>占8位，用来获得更好的服务。</p></li><li><p><strong>总长度：</strong>首部和数据之和的长度，单位为字节。总长度字段为16 位，因此数据报的最大长度为 $2^{16}-1&#x3D;65535$ 字节。</p></li><li><p><strong>标识：</strong>占 16 位，IP 软件在存储器中维持一个计数器，每产生一个数据报，计数器就加1，并将此值赋给标识字段。但这个“标识”并不是序号，因为IP是无连接服务，数据报不存在按序接收的问题。</p></li><li><p><strong>标志：</strong>占 3 位，但目前只有两位有意义。</p><ol><li>标志字段中的最低位记为 MF（More Fragment）。MF &#x3D; 1即表示后面“还有分片”的数据报。MF &#x3D; 0 表示这已是若干数据报片中的最后一个。</li><li>标志字段中间的一位记为 DF（Don’t Fragment），意思是“不能分片”。只有当 DF &#x3D; 0 时才允许分片。</li></ol></li><li><p><strong>片偏移：</strong>占 13 位，较长的分组在分片后，某片在原分组中的相对位置。也就是说，相对于用户数据字段的起点，该片从何处开始。</p></li><li><p><strong>生存时间：</strong>占 8 位，生存时间字段常用的英文缩写是 TTL 表明这是数据报在网络中的寿命。</p></li><li><p><strong>协议：</strong>占 8 位，&#x3D;此数据报携带的数据是使用何种协议。</p><p><img src="/../img/post/computer-network/4-13.jpg"></p></li><li><p><strong>首部检验和：</strong>占 16 位，这个字段只检验数据报的首部，但不包括数据部分。</p><p><img src="/../img/post/computer-network/4-14.jpg"></p></li><li><p><strong>源地址：</strong>占 32 位。</p></li><li><p><strong>目的地址：</strong>占 32 位。</p></li></ol><h3 id="2-5-2-IP数据报首部的可变部分"><a href="#2-5-2-IP数据报首部的可变部分" class="headerlink" title="2.5.2 IP数据报首部的可变部分"></a>2.5.<strong>2 IP数据报首部的可变部分</strong></h3><p>IP 数据报首部的可变部分就是一个选项字段。选项字段用来支持排错、测量以及安全等措施，内容很丰富。此字段的长度可变，从 1 个字节到 40 个字节不等，取决于所选择的项目。</p><p>增加首部的可变部分是为了增加 IP 数据报的功能，但这同时也使得 IP 数据报的首部长度成为可变的。这就增加了每一个路由器处理数据报的开销。实际上这些选项很少被使用。</p><h2 id="2-6-IP-层转发分组的流程"><a href="#2-6-IP-层转发分组的流程" class="headerlink" title="2.6 IP 层转发分组的流程"></a><strong>2.6 IP 层转发分组的流程</strong></h2><p>在路由表中，对每一条路由最主要的是以下两个信息：</p><p>$$<br>(目的网络地址，下一跳地址)<br>$$</p><p><img src="/../img/post/computer-network/4-15.jpg"></p><p>于是，我们就根据目的网络地址来确定下一跳路由器，这样做可得出以下的结果。</p><ol><li>IP 数据报最终一定可以找到目的主机所在目的网络上的路由器（可能要通过多次的间接交付)。</li><li>只有到达最后一个路由器时，才试图向目的主机进行直接交付。</li></ol><p>虽然互联网所有的分组转发都是基于目的主机所在的网络，但在大多数情况下都允许有这样的特例：</p><ol><li>即对特定的目的主机指明一个路由。这种路由叫做特定主机路由。采用特定主机路由可使网络管理人员更方便地控制网络和测试网络，同时也可在需要考虑某种安全问题时采用这种特定主机路由。在对网络的连接或路由表进行排错时，指明到某一台主机的特殊路由就十分有用。</li><li>路由器还可采用默认路由（default route）以减小路由表所占用的空间和搜索路由表所用的时间。这种转发方式在一个网络只有很少的对外连接时是很有用的。</li></ol><h1 id="3-划分子网和构造超网"><a href="#3-划分子网和构造超网" class="headerlink" title="3.划分子网和构造超网"></a>3.划分子网和构造超网</h1><h2 id="3-1-划分子网"><a href="#3-1-划分子网" class="headerlink" title="3.1 划分子网"></a>3.1 <strong>划分子网</strong></h2><h3 id="3-1-1-从两级-IP-地址到三级-IP-地址"><a href="#3-1-1-从两级-IP-地址到三级-IP-地址" class="headerlink" title="3.1.1 从两级 IP 地址到三级 IP 地址"></a>3.1.<strong>1 从两级 IP 地址到三级 IP 地址</strong></h3><p>在 ARPANET 的早期，IP地址的设计确实不够合理。</p><ol><li>IP 地址空间的利用率有时很低；</li><li>给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏；</li><li>两级IP地址不够灵活。</li></ol><p>为解决上述问题，从1985年起在IP地址中又增加了一个“子网号字段”，使两级IP地址变成为三级IP地址，它能够较好地解决上述问题，并且使用起来也很灵活。这种做法叫做划分子网（subnetting）[RFC 950]，或子网寻址或子网路由选择。划分子网已成为互联网的正式标准协议。</p><p>$$<br>IP地址 ::&#x3D; { &lt;网络号&gt;,&lt;网络号&gt;,&lt;主机号&gt; }<br>$$</p><p><img src="/../img/post/computer-network/4-16.jpg"></p><p>总之，当没有划分子网时，IP地址是两级结构。划分子网后IP地址变成了三级结构。划分子网只是把IP地址的主机号这部分进行再划分，而不改变IP地址原来的网络号。</p><h3 id="3-1-2-子网掩码"><a href="#3-1-2-子网掩码" class="headerlink" title="3.1.2 子网掩码"></a>3.1.2 <strong>子网掩码</strong></h3><p>我们知道，从 IP 数据报的首部无法看出源主机或目的主机所连接的网络是否进行了子网的划分。这是因为 32 位的 IP 地址本身以及数据报的首部都没有包含任何有关子网划分的信息。因此必须另外想办法，这就是使用子网掩码。</p><p><img src="/../img/post/computer-network/4-17.jpg"></p><p>逐位相“与”（AND）得出了所要找的子网的网络地址。</p><p><strong>使用子网掩码的好处就是：</strong>不管网络有没有划分子网，只要把子网掩码和 IP 地址进行逐位的“与”运算（AND），就立即得出网络地址来。这样在路由器处理到来的分组时就可采用同样的算法。</p><p><strong>在不划分子网时，仍然要使用子网掩码：</strong>为了更便于查找路由表，现在互联网的标准规定所有的网络都必须使用子网掩码，同时在路由器的路由表中也必须有子网掩码这一栏。</p><p>如果一个网络不划分子网，那么该网络的子网掩码就使用默认子网掩码：</p><ul><li>A类地址的默认子网掩码是255.0.0.0，或 0xFF000000</li><li>B类地址的默认子网掩码是255.255.0.0，或 0xFFFF0000</li><li>C类地址的默认子网掩码是255.255.255.0，或 0xFFFFFF00</li></ul><p><strong>子网掩码是一个网络或一个子网的重要属性。</strong></p><h2 id="3-2-使用子网时分组的转发"><a href="#3-2-使用子网时分组的转发" class="headerlink" title="3.2 使用子网时分组的转发"></a>3.2 <strong>使用子网时分组的转发</strong></h2><p>使用子网划分后，路由表必须包含：目的网络地址、子网掩码和下一跳地址。</p><p><strong>在划分子网的情况下，路由器转发分组的算法如下：</strong></p><ol><li>从收到的数据报的首部提取目的 IP 地址 D。</li><li>先判断是否为直接交付。对路由器直接相连的网络逐个进行检查：用各网络的子网掩码和 D 逐位相“与”，看结果是否和相应的网络地址匹配。若匹配，则把分组进行直接交付（当然还需要把 D 转换成物理地址，把数据报封装成帧发送出去)，转发任务结束。否则就是间接交付，执行(3)。</li><li>若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由表中所指明的下一跳路由器；否则，执行(4)。</li><li>对路由表中的每一行（目的网络地址，子网掩码，下一跳地址），用其中的子网掩码和D逐位相“与”，其结果为 N。若 N 与该行的目的网络地址匹配，则把数据报传送给该行指明的下一跳路由器；否则，执行(5)。</li><li>若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；否则，执行(6)。</li><li>报告转发分组出错。</li></ol><h2 id="3-3-无分类编址-CIDR（构造超网）"><a href="#3-3-无分类编址-CIDR（构造超网）" class="headerlink" title="3.3 无分类编址 CIDR（构造超网）"></a>3.3 <strong>无分类编址 CIDR（构造超网）</strong></h2><h3 id="3-3-1-网络前缀"><a href="#3-3-1-网络前缀" class="headerlink" title="3.3.1 网络前缀"></a>3.3.<strong>1 网络前缀</strong></h3><p>由于 2011 年 IPV4 地址耗尽，要用无分类编址了。正式名称是无分类域间路由选择 CIDR。</p><p><strong>CIDR 最主要的特点有两个：</strong></p><ol><li>CIDR 消除了传统的A类、B类和C类地址以及划分子网的概念</li><li>CIDR 把网络前缀都相同的连续的IP地址组成一个 “CIDR地址块”。</li></ol><p>网络前缀越短，其地址块所包含的地址数就越多。</p><h3 id="3-1-2-最长前缀匹配"><a href="#3-1-2-最长前缀匹配" class="headerlink" title="3.1.2 最长前缀匹配"></a>3.1.<strong>2 最长前缀匹配</strong></h3><p>应当从匹配结果中选择具有“最长”网络前缀的路由，否则可能会得到不止一个的匹配结果。</p><h3 id="3-1-3-使用二叉线索查找路由表"><a href="#3-1-3-使用二叉线索查找路由表" class="headerlink" title="3.1.3 使用二叉线索查找路由表"></a>3.1.<strong>3 使用二叉线索查找路由表</strong></h3><p>由于要寻找最长前缀匹配，使路由表的查找过程变得更加复杂了。对无分类编址的路由表的最简单的查找算法就是对所有可能的前缀进行循环查找。为了进行更加有效的查找，通常是把无分类编址的路由表存放在一种层次的数据结构中，然后自上而下地按层次进行查找。这里最常用的就是二叉线索（binary trie），它是一种特殊结构的树。</p><p><img src="/../img/post/computer-network/4-18.jpg"></p><p>为了提高二叉线索的查找速度，广泛使用了各种压缩技术。</p><h1 id="4-网际控制报文协议-ICMP"><a href="#4-网际控制报文协议-ICMP" class="headerlink" title="4.网际控制报文协议 ICMP"></a>4.网际控制报文协议 ICMP</h1><p>为了更有效地转发 IP 数据报和提高交付成功的机会，在网际层使用了网际控制报文协议 ICMP（Internet Control Message Protocol）[RFC 792]。</p><p>ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告。ICMP 是互联网的标准协议，但不是高层协议，而是 IP 层的协议。</p><p><strong>ICMP 报文格式：</strong></p><p><img src="/../img/post/computer-network/4-19.jpg"></p><h2 id="4-1-ICMP-报文的种类"><a href="#4-1-ICMP-报文的种类" class="headerlink" title="4.1 ICMP 报文的种类"></a>4.1 <strong>ICMP 报文的种类</strong></h2><p><strong>ICMP 报文的种类有两种：</strong></p><ol><li>ICMP 差错报告报文<ol><li>终点不可达</li><li>时间超过</li><li>参数问题</li><li>改变路由（重定向）</li></ol></li><li>ICMP 询问报文</li></ol><p><img src="/../img/post/computer-network/4-20.jpg"></p><p><strong>下面是不应发送 ICMP 差错报告报文的几种情况：</strong></p><ol><li>对 ICMP 差错报告报文，不再发送 ICMP 差错报告报文。</li><li>对第一个分片的数据报片的所有后续数据报片，都不发送 ICMP 差错报告报文。</li><li>对具有多播地址的数据报，都不发送 ICMP 差错报告报文。</li><li>对具有特殊地址（如127.0.0.0 或 0.0.0.0）的数据报，不发送 ICMP 差错报告报文。</li></ol><p><strong>常用的 ICMP 询问报文有两种：</strong></p><ol><li>回送请求和回答</li><li>时间戳请求和回答</li></ol><h2 id="4-2-ICMP-的应用举例"><a href="#4-2-ICMP-的应用举例" class="headerlink" title="4.2 ICMP 的应用举例"></a>4.2 <strong>ICMP 的应用举例</strong></h2><p>ICMP 的一个重要应用就是分组网间探测 PING（Packet InterNet Groper），用来测试两台主机之间的连通性。直接使用网络层，没有经过运输层的 TCP 或 UDP。</p><h1 id="5-互联网的路由选择协议"><a href="#5-互联网的路由选择协议" class="headerlink" title="5.互联网的路由选择协议"></a>5.互联网的路由选择协议</h1><h2 id="5-1-有关路由选择协议的几个基本概念"><a href="#5-1-有关路由选择协议的几个基本概念" class="headerlink" title="5.1 有关路由选择协议的几个基本概念"></a>5.1 <strong>有关路由选择协议的几个基本概念</strong></h2><p><strong>1.理想的路由算法</strong></p><ol><li>算法必须是正确的和完整的。</li><li>算法在计算上应简单。</li><li>算法应能适应通信量和网络拓扑的变化，这就是说，要有自适应性。</li><li>算法应具有稳定性。</li><li>算法应是公平的。</li><li>算法应是最佳的。路由选择算法应当能够找出最好的路由，使得分组平均时延最小而网络的吞吐量最大。</li></ol><p><strong>2.分层次的路由选择协议</strong></p><ol><li><strong>内部网关协议 IGP：</strong>如 RIP，OSPF</li><li><strong>外部网关协议 EGP：</strong>如 BGP-4</li></ol><h2 id="5-2-内部网关协议-RIP"><a href="#5-2-内部网关协议-RIP" class="headerlink" title="5.2 内部网关协议 RIP"></a>5.2 <strong>内部网关协议 RIP</strong></h2><h3 id="5-2-1-工作原理"><a href="#5-2-1-工作原理" class="headerlink" title="5.2.1 工作原理"></a>5.2.<strong>1 工作原理</strong></h3><p>RIP (Routing Information Protocol）是内部网关协议 IGP 中最先得到广泛使用的协议，中文名称叫做路由信息协议，但很少被使用。</p><p>RIP 是一种分布式的基于距离向量的路由选择协议，是互联网的标准协议，其最大优点就是简单，特点如下：</p><ol><li>仅和相邻路由器交换信息；</li><li>路由器交换的信息是当前本路由器所知道的全部信息，即自己现在的路由表；</li><li>按固定的时间间隔交换路由信息。</li></ol><h3 id="5-2-2-距离向量算法"><a href="#5-2-2-距离向量算法" class="headerlink" title="5.2.2 距离向量算法"></a>5.2.<strong>2 距离向量算法</strong></h3><p>对每一个相邻路由器发送过来的RIP报文，进行距离排序。</p><h3 id="5-2-3-RIP协议的报文格式"><a href="#5-2-3-RIP协议的报文格式" class="headerlink" title="5.2.3 RIP协议的报文格式"></a>5.2.<strong>3 RIP协议的报文格式</strong></h3><p>RIP 报文由首部和路由部分组成。首部占 4 个字节，路由部分最多 25 个路由，最长 $4+20×25&#x3D;504$ 字节。</p><p><img src="/../img/post/computer-network/4-21.jpg"></p><h2 id="5-3-内部网关协议-OSPF"><a href="#5-3-内部网关协议-OSPF" class="headerlink" title="5.3 内部网关协议 OSPF"></a>5.3 <strong>内部网关协议 OSPF</strong></h2><h3 id="5-3-1-OSPF-协议的基本特点"><a href="#5-3-1-OSPF-协议的基本特点" class="headerlink" title="5.3.1 OSPF 协议的基本特点"></a>5.3.<strong>1 OSPF 协议的基本特点</strong></h3><p>开放最短路径优先 OSPF（Open Shortest Path First）。它是为克服 RIP 的缺点在 1989 年开发出来的。OSPF 的原理很简单，但实现起来却较复杂。</p><p>OSPF 最主要的特征就是使用分布式的链路状态协议（link state protocol），而不是像 RIP 那样的距离向量协议。和 RIP 协议相比，OSPF 的三个要点和 RIP 的都不一样：</p><ol><li>向本自治系统中所有路由器发送信息。</li><li>发送的信息就是与本路由器相邻的所有路由器的链路状态，但只是路由器知道的部分信息。</li><li>只有当链路状态发生变化时，路由器才向所有路由器用洪泛法发送此信息。而不像 RIP 那样，不管网络拓扑有无发生变化，路由器之间都要定期交换路由表的信息。</li></ol><p>OSPF 不用 UDP 而是直接用 IP 数据报传送（其IP数据报首部的协议字段值为89）。OSPF构成的数据报很短。这样做可减少路由信息的通信量。数据报很短的另一好处是可以不必将长的数据报分片传送。分片传送的数据报只要丢失一个，就无法组装成原来的数据报，而整个数据报就必须重传。</p><p>OSPF分组使用 24 字节的固定长度首部，分组的数据部分可以是五种类型分组中的一种：</p><ol><li><strong>版本</strong></li><li><strong>类型：</strong>可以是五种类型分组中的一种</li><li><strong>分组长度</strong></li><li><strong>路由器标识符：</strong>标志发送该分组的路由器的接口的IP地址</li><li><strong>区域标识符：</strong>分组属于的区域的标识符</li><li><strong>检验和：</strong>用来检测分组中的差错</li><li><strong>鉴别类型：</strong>目前只有两种，0(不用）和1（口令)</li><li><strong>鉴别：</strong>鉴别类型为 0 时就填入 0，鉴别类型为 1 则填入 8 个字符的口令</li></ol><p><img src="/../img/post/computer-network/4-22.jpg"></p><h3 id="5-3-2-OSPF-的五种分组类型"><a href="#5-3-2-OSPF-的五种分组类型" class="headerlink" title="5.3.2 OSPF 的五种分组类型"></a>5.3.<strong>2 OSPF 的五种分组类型</strong></h3><ol><li>问候（Hello）分组</li><li>数据库描述（Database Description）分组</li><li>链路状态请求（Link State Request）分组</li><li>链路状态更新（Link State Update）分组,</li><li>链路状态确认（Link State Acknowledgment）分组</li></ol><h2 id="5-4-外部网关协议-BGP"><a href="#5-4-外部网关协议-BGP" class="headerlink" title="5.4 外部网关协议 BGP"></a>5.4 <strong>外部网关协议 BGP</strong></h2><p>边界网关协议 BGP 只能是力求寻找一条能够到达目的网络且比较好的路由（不能兜圈子），而并非要寻找一条最佳路由。BGP 采用了路径向量（path vector）路由选择协议，它与距离向量协议（如 RIP）和链路状态协议（如 OSPF）都有很大的区别。</p><p><img src="/../img/post/computer-network/4-23.jpg"></p><h3 id="5-4-1-BGP-4-四种报文"><a href="#5-4-1-BGP-4-四种报文" class="headerlink" title="5.4.1 BGP-4 四种报文"></a>5.4.1 <strong>BGP-4 四种报文</strong></h3><ol><li>OPEN（打开）报文，用来与相邻的另一个BGP发言人建立关系，使通信初始化。</li><li>UPDATE（更新）报文，用来通告某一路由的信息，以及列出要撤销的多条路由。</li><li>KEEPALIVE（保活）报文，用来周期性地证实邻站的连通性。</li><li>NOTIFICATION（通知）报文，用来发送检测到的差错。</li></ol><h3 id="5-4-2-BGP-报文首部"><a href="#5-4-2-BGP-报文首部" class="headerlink" title="5.4.2 BGP 报文首部"></a>5.4.2 <strong>BGP 报文首部</strong></h3><p><img src="/../img/post/computer-network/4-24.jpg"></p><h2 id="5-5-路由器的结构"><a href="#5-5-路由器的结构" class="headerlink" title="5.5 路由器的结构"></a>5.5 <strong>路由器的结构</strong></h2><h3 id="5-5-1-路由器的结构"><a href="#5-5-1-路由器的结构" class="headerlink" title="5.5.1 路由器的结构"></a>5.5.1 路由器的结构</h3><p>路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。</p><p><img src="/../img/post/computer-network/4-25.jpg"></p><p><img src="/../img/post/computer-network/4-26.jpg"></p><h3 id="5-5-2-交换结构"><a href="#5-5-2-交换结构" class="headerlink" title="5.5.2 交换结构"></a>5.5.2 交换结构</h3><p>交换结构是路由器的关键构件 [KURO13]。正是这个交换结构把分组从一个输入端口转移到某个合适的输出端口。</p><p><strong>三种交换方法：</strong></p><ol><li>通过储存器交换</li><li>通过总线交换：同一时刻只能有一个分组，但无需处理机干预</li><li>通过纵横交换：互连网络，有 2N 条总线，N 个输入&#x2F;出端口</li></ol><p><img src="/../img/post/computer-network/4-27.jpg"></p><h1 id="6-IPv6"><a href="#6-IPv6" class="headerlink" title="6.IPv6"></a>6.IPv6</h1><h2 id="6-1-IPv6-发基本首部"><a href="#6-1-IPv6-发基本首部" class="headerlink" title="6.1 IPv6 发基本首部"></a>6.1 IPv6 发基本首部</h2><p><strong>IPv6 所引进的主要变化如下：</strong></p><ol><li>更大的地址空间。IPv6 把地址从 IPv4 的 32 位增大到 4 倍到 128 位，使地址空间增大了 $2^{96}$ 倍；</li><li>扩展的地址层次结构；</li><li>灵活的首部格式。IPv6 数据报的首部和 IPv4 的并不兼容；</li><li>改进的选项。IPv6 允许数据报包含有选项的控制信息；</li><li>允许协议继续扩充；</li><li>支持即插即用（即自动配置），因此 IPv6 不需要使用 DHCP；</li><li>支持资源的预分配；</li><li>IPv6 首部改为 8 字节对齐（即首部长度必须是8字节的整数倍）。</li></ol><p><img src="/../img/post/computer-network/4-28.jpg"></p><p><strong>与 IPv4 相比，IPv6 对首部中的某些字段进行了如下的更改：</strong></p><ol><li>取消了首部长度字段，因为它的首部长度是固定的（40字节）；</li><li>取消了服务类型字段，因为优先级和流标号字段实现了服务类型字段的功能；</li><li>取消了总长度字段，改用有效载荷长度字段；</li><li>取消了标识、标志和片偏移字段，因为这些功能已包含在分片扩展首部中。把TTL字段改称为跳数限制字段，但作用是一样的（名称与作用更加一致)。</li><li>取消了协议字段，改用下一个首部字段；</li><li>取消了检验和字段，这样就加快了路由器处理数据报的速度。我们知道，在数据链路层对检测出有差错的帧就丢弃；</li><li>取消了选项字段，而用扩展首部来实现选项功能。</li></ol><p>由于把首部中不必要的功能取消了，使得 IPv6 首部的字段数减少到只有 8 个（虽然首部长度增大了一倍）。下面解释 IPv6 基本首部中各字段的作用：</p><p><img src="/../img/post/computer-network/4-29.jpg"></p><ol><li><strong>版本：</strong>占4位，对 IPv6 该字段是 6。</li><li><strong>通信量类：</strong>占8位。这是为了区分不同的 IPv6 数据报的类别或优先级。</li><li><strong>流标号：</strong>占20 位。IPv6 的一个新的机制是支持资源预分配。</li><li><strong>有效载荷长度：</strong>占16位。它指明 IPv6 数据报除基本首部以外的字节数。这个字段的最大值是 64 KB（65535字节）。</li><li><strong>下一个首部：</strong>占8位。它相当于 IPv4 的协议字段或可选字段。</li><li><strong>跳数限制：</strong>占8位。用来防止数据报在网络中无限期地存在。</li><li><strong>源地址：</strong>占128位。是数据报的发送端的P地址。</li><li><strong>目的地址：</strong>占128位。是数据报的接收端的IP地址。</li></ol><h2 id="6-2-IPv6-的地址"><a href="#6-2-IPv6-的地址" class="headerlink" title="6.2 IPv6 的地址"></a>6.2 IPv6 的地址</h2><ol><li><strong>单播（unicast）：</strong>单播就是传统的点对点通信。</li><li><strong>多播（multicast）：</strong>多播是一点对多点的通信，数据报发送到一组计算机中的每一个。IPv6 没有采用广播的术语，而是将广播看作多播的一个特例。</li><li><strong>任播（anycast）：</strong>这是 IPv6 增加的一种类型。任播的终点是一组计算机，但数据报只交付其中的一个，通常是距离最近的一个。</li></ol><h3 id="6-2-1-IPv6-冒号十六进制记法"><a href="#6-2-1-IPv6-冒号十六进制记法" class="headerlink" title="6.2.1 IPv6 冒号十六进制记法"></a>6.2.1 IPv6 冒号十六进制记法</h3><p>在十六进制记法中，允许把数字前面的 0 省略：</p><p>$$<br>FF05:0:0:0:0 :0:0:B3<br>$$</p><p>可压缩为：</p><p>$$<br>FF05::B3<br>$$</p><p><img src="/../img/post/computer-network/4-30.jpg"></p><p><strong>未指明地址：</strong>这是 16 字节的全 0 地址，可缩写为两个冒号 “::”。这个地址不能用作目的地址，而只能为某台主机当作源地址使用，条件是这台主机还没有配置到一个标准的IP地址。这类地址仅此一个。</p><p><strong>环回地址：</strong>IPv6 的环回地址是 0:0:0:0:0:0:0:1，可缩写为 ::1。它的作用和 IPv4 的环回地址一样。这类地址也是仅此一个。</p><p><strong>多播地址：</strong>功能和 IPv4 的一样。这类地址占 IPv6 地址总数的 1&#x2F;256。</p><p><strong>本地链路单播地址：</strong>有些单位的网络使用 TCP&#x2F;IP 协议，但并没有连接到互联网上。连接在这样的网络上的主机都可以使用这种本地地址进行通信，但不能和互联网上的其他主机通信。这类地址占 IPv6 地址总数的 1&#x2F;1024。</p><p><strong>全球单播地址：</strong>IPv6 的这一类单播地址是使用得最多的一类。</p><h2 id="6-3-从-IPv4-向-IPv6-过渡"><a href="#6-3-从-IPv4-向-IPv6-过渡" class="headerlink" title="6.3 从 IPv4 向 IPv6 过渡"></a>6.3 从 IPv4 向 IPv6 过渡</h2><h3 id="6-3-1-双协议栈"><a href="#6-3-1-双协议栈" class="headerlink" title="6.3.1 双协议栈"></a>6.3.1 双协议栈</h3><p>双协议栈（dual stack）是指在完全过渡到 IPv6 之前，使一部分主机（或路由器）装有双协议栈：一个 IPv4 和一个 IPv6。因此双协议栈主机（或路由器）既能够和 IPv6 的系统通信，又能够和 IPv4 的系统通信。双协议栈的主机（或路由器）记为 IPv6&#x2F;IPv4，表明它同时具有两种IP地址：一个 IPv6 地址和一个 IPv4 地址。</p><p><img src="/../img/post/computer-network/4-31.jpg"></p><h3 id="6-3-2-隧道技术"><a href="#6-3-2-隧道技术" class="headerlink" title="6.3.2 隧道技术"></a>6.3.2 隧道技术</h3><p>在 IPv6 数据报要进入 IPv4 网络时，把 IPv6 数据报封装成为 IPv4 数据报。</p><p><img src="/../img/post/computer-network/4-32.jpg"></p><h2 id="6-4-ICMPv6"><a href="#6-4-ICMPv6" class="headerlink" title="6.4 ICMPv6"></a>6.4 ICMPv6</h2><p><strong>ICMP：</strong>IPv4 反馈差错信息</p><p><strong>ICMPv6：</strong>IPv6 反馈差错信息</p><p>ICMPv6 是面向报文的协议，它利用报文来报告差错，获取信息，探测邻站或管理多播通信。</p><p><img src="/../img/post/computer-network/4-33.jpg"></p><h1 id="7-IP多播"><a href="#7-IP多播" class="headerlink" title="7.IP多播"></a>7.IP多播</h1><h2 id="7-1-IP多播的基本概念"><a href="#7-1-IP多播的基本概念" class="headerlink" title="7.1 IP多播的基本概念"></a>7.1 IP多播的基本概念</h2><p>R1 转发分组同时复制三个副本，向 R2、R3、R4 转发。<strong>多播数据包不产生 ICMP 差错报文。</strong></p><p><img src="/../img/post/computer-network/4-34.jpg"></p><p>其实多播组的标识符就是 IP 地址中的 D 类地址。D 类 IP 地址的前四位是 1110，因此 D 类地址范围是 224.0.0.0 到 239.255.255.255。我们就用每一个D类地址标志一个多播组。这样，D 类地址共可标志 22 个多播组，也就是说，在同一时间可以允许有超过 2.6 亿的多播组在互联网上运行。</p><p>多播数据报也是“尽最大努力交付”，不保证一定能够交付多播组内的所有成员。因此，多播数据报和一般的 IP 数据报的区别就是它使用 D 类 IP 地址作为目的地址，并且首部中的协议字段值是 2，表明使用网际组管理协议 IGMP。<strong>多播地址只能用于目的地址，而不能用于源地址。</strong></p><h2 id="7-2-在局域网上进行硬件多播"><a href="#7-2-在局域网上进行硬件多播" class="headerlink" title="7.2 在局域网上进行硬件多播"></a>7.2 在局域网上进行硬件多播</h2><p>由于多播 IP 地址与以太网硬件地址的映射关系不是唯一的，因此收到多播数据报的主机，还要在 IP 层利用软件进行过滤。</p><h2 id="7-3-网际组管理协议IGMP和多播路由选择协议"><a href="#7-3-网际组管理协议IGMP和多播路由选择协议" class="headerlink" title="7.3 网际组管理协议IGMP和多播路由选择协议"></a>7.3 网际组管理协议IGMP和多播路由选择协议</h2><h3 id="7-3-1-IP-多播需要两种协议"><a href="#7-3-1-IP-多播需要两种协议" class="headerlink" title="7.3.1 IP 多播需要两种协议"></a>7.3.1 IP 多播需要两种协议</h3><ol><li>网际组管理协议 IGMP</li><li>多播路由选择协议</li></ol><h3 id="7-3-2-网际组管理协议-IGMP"><a href="#7-3-2-网际组管理协议-IGMP" class="headerlink" title="7.3.2 网际组管理协议 IGMP"></a>7.3.2 网际组管理协议 IGMP</h3><p>和网际控制报文协议 ICMP 相似，IGMP 使用 IP 数据报传递其报文（即 IGMР 报文加上 IP 首部构成 IP 数据报），但它也向 IP 提供服务。因此，我们不把 IGMP 看成是一个单独的协议，而是属于整个网际协议 IP 的一个组成部分。</p><p><strong>IGMP 的工作可分为两个阶段：</strong></p><ul><li><strong>第一阶段：</strong>当某台主机加入新的多播组时，该主机应向多播组的多播地址发送一个 IGMP 报文，声明自己要成为该组的成员。本地的多播路由器收到 IGMP 报文后，还要利用多播路由选择协议把这种组成员关系转发给互联网上的其他多播路由器。</li><li><strong>第二阶段：</strong>组成员关系是动态的。本地多播路由器要周期性地探询本地局域网上的主机，以便知道这些主机是否还继续是组的成员。只要有一台主机对某个组响应，那么多播路由器就认为这个组是活跃的。但一个组在经过几次的探询后仍然没有一台主机响应，多播路由器就认为本网络上的主机已经都离开了这个组，因此也就不再把这个组的成员关系转发给其他的多播路由器。</li></ul><h3 id="7-3-3-多播路由选择协议（尚未标准化）"><a href="#7-3-3-多播路由选择协议（尚未标准化）" class="headerlink" title="7.3.3 多播路由选择协议（尚未标准化）"></a>7.3.3 多播路由选择协议（尚未标准化）</h3><p><strong>在转发多播数据报时使用了以下的三种方法：</strong></p><ol><li><strong>洪泛与剪除：</strong>这种方法适合于较小的多播组。</li><li><strong>隧道技术：</strong>适用于多播组的位置在地理上很分散的情况。</li><li><strong>基于核心的发现技术：</strong>这种方法对于多播组的大小在较大范围内变化时都适合。</li></ol><h1 id="8-虚拟专用网VPN和网络地址转换NAT"><a href="#8-虚拟专用网VPN和网络地址转换NAT" class="headerlink" title="8.虚拟专用网VPN和网络地址转换NAT"></a>8.虚拟专用网VPN和网络地址转换NAT</h1><h2 id="8-1-虚拟专用网-VPN"><a href="#8-1-虚拟专用网-VPN" class="headerlink" title="8.1 虚拟专用网 VPN"></a>8.1 虚拟专用网 VPN</h2><p>专用地址只能用做本地地址而不能用作全球地址。在互联网中的所有路由器，对目的地址是专用地址的数据报一律不进行转发。</p><ul><li>10.0.0.0 到 10.255.255.255（或记为10.0.0.0&#x2F;8，它又称为24位块）</li><li>172.16.0.0 到 172.31.255.255（或记为172.16.0.0&#x2F;12，它又称为20位块）</li><li>192.168.0.0到192.168.255.255（或记为192.168.0.0&#x2F;16，它又称为16位块）</li></ul><p>采用这样的专用 IP 地址的互连网络称为专用互联网或本地互联网，或更简单些，就叫做专用网。</p><h2 id="8-2-网络地址转换-NAT"><a href="#8-2-网络地址转换-NAT" class="headerlink" title="8.2 网络地址转换 NAT"></a>8.2 网络地址转换 NAT</h2><p>专用网内主机想与互联网上主机通信（并不要加密），用 NAT，路由器要装 NAT 软件，并且至少还要有一个全球 IP。</p><p><img src="/../img/post/computer-network/4-35.jpg"></p><h1 id="9-多协议标记交换-MPLS"><a href="#9-多协议标记交换-MPLS" class="headerlink" title="9.多协议标记交换 MPLS"></a>9.多协议标记交换 MPLS</h1><p>MPLS 利用面向连接技术，使每个分组携带一个叫做标记（label）的小整数。当分组到达交换机（即标记交换路由器）时，交换机读取分组的标记，并用标记值来检索分组转发表。这样就比查找路由表来转发分组要快得多。</p><p><strong>MPLS 具有以下三个方面的特点：</strong></p><ol><li>支持面向连接的服务质量</li><li>支持流量工程，平衡网络负载</li><li>有效地支持虚拟专用网VPN</li></ol><h2 id="9-1-MPLS-的工作原理"><a href="#9-1-MPLS-的工作原理" class="headerlink" title="9.1 MPLS 的工作原理"></a>9.1 MPLS 的工作原理</h2><h3 id="9-1-1-基本工作过程"><a href="#9-1-1-基本工作过程" class="headerlink" title="9.1.1 基本工作过程"></a>9.1.1 基本工作过程</h3><ol><li>MPLS 域中的各 LSR 使用专门的标记分配协议 LDP 交换报文，并找出和特定标记相对应的路径，即标记交换路径 LSP。</li><li>当一个 IP 数据报进入到 MPLS 域时，MPLS入口结点就给它打上标记，并按照转发表把它转发给下一个 LSR。</li><li>由于在全网内统一分配全局标记数值是非常困难的，因此一个标记仅仅在两个标记交换路由器 LSR 之间才有意义。分组每经过一个 LSR， LSR 就要做两件：一是转发，二是更换新的标记，即把入标记更换成为出标记。</li><li>当 IP 数据报离开 MPLS 域时，MPLS出口结点就把 MPLS 的标记去除，把 IP 数据报交付非 MPLS 的主机或路由器，以后就按照普通的转发方法进行转发。</li></ol><h3 id="9-1-2-转发等价类-FEC"><a href="#9-1-2-转发等价类-FEC" class="headerlink" title="9.1.2 转发等价类 FEC"></a>9.1.2 转发等价类 FEC</h3><p>MPLS 有个很重要的概念就是转发等价类 FEC（Forwarding Equivalence Class）。所谓 “转发等价类” 就是路由器按照同样方式（表示从同样接口转发到同样的下一跳地址，并且具有同样服务类别和同样丢弃优先级等）对待的 IP 数据报的集合。</p><h2 id="9-2-MPLS首部的位置与格式"><a href="#9-2-MPLS首部的位置与格式" class="headerlink" title="9.2 MPLS首部的位置与格式"></a>9.2 MPLS首部的位置与格式</h2><p>从层次的角度看，MPLS 首部就处在第二层和第三层之间。在把加上  MPLS 首部的 IP 数据报封装成以太网帧时，以太网的类型字段在单播的情况下设置为$8847_{16}$，而在多播的情况下为 $8848_{16}$ 。这样，接收方可以用帧的类型来判决这个帧是携带了 MPLS 标记还是一个常规的 IP 数据报。</p><p><img src="/../img/post/computer-network/4-36.jpg"></p><p><strong>MPLS 首部共包括以下四个字段：</strong></p><ol><li><strong>标记值：</strong>占20位。理论上可使用标记的所有20位，因而可以同时容纳高达 $2^{20}$ 个流（即1048576个流)。但是，实际上几乎没有哪个MPLS实例会使用很大数目的流，因为通常需要管理员人工管理和设置每条交换路径。</li><li><strong>试验：</strong>占3位，目前保留用于试验。</li><li><strong>栈 S：</strong>占1位，在有“标记栈”时使用。</li><li><strong>生存时间 TTL：</strong>占8位，用来防止 MPLS分组在MPLS域中兜圈子。</li></ol>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>课本</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机网络 第三章：数据链路层</title>
    <link href="/computer-network-3/"/>
    <url>/computer-network-3/</url>
    
    <content type="html"><![CDATA[<h1 id="1-使用点对点信道的数据链路层"><a href="#1-使用点对点信道的数据链路层" class="headerlink" title="1.使用点对点信道的数据链路层"></a>1.使用点对点信道的数据链路层</h1><p><img src="/../img/post/computer-network/3-1.jpg"></p><h2 id="1-1-数据链路和帧"><a href="#1-1-数据链路和帧" class="headerlink" title="1.1 数据链路和帧"></a>1.1 数据链路和帧</h2><p><strong>链路：</strong>从一个结点到相邻结点的一段物理线路（有线或无线)，而中间没有任何其他的交换结点。</p><p><strong>数据链路：</strong>链路上必要的通信协议来控制这些数据的传输。（逻辑链路就是数据链路）</p><p><strong>帧：</strong>点对点信道的数据链路层的协议数据单元。</p><p><img src="/../img/post/computer-network/3-2.jpg"></p><p><strong>点对点信道的数据链路层在进行通信时的主要步骤如下：</strong></p><ol><li>结点A的数据链路层把网络层交下来的IP数据报添加首部和尾部封装成帧。</li><li>结点A把封装好的帧发送给结点B的数据链路层。</li><li>若结点B的数据链路层收到的帧无差错，则从收到的帧中提取出IP数据报交给上面的网络层;否则丢弃这个帧。</li></ol><h2 id="1-2-三个基本问题"><a href="#1-2-三个基本问题" class="headerlink" title="1.2 三个基本问题"></a>1.2 三个基本问题</h2><h3 id="1-2-1-封装成帧"><a href="#1-2-1-封装成帧" class="headerlink" title="1.2.1 封装成帧"></a>1.2.<strong>1 封装成帧</strong></h3><p>封装成帧就是在一段数据的前后分别添加首部和尾部，这样就构成了一个帧。分组交换的一个重要概念就是：<strong>所有在互联网上传送的数据都以分组（即IP数据报）为传送单位。</strong></p><p><img src="/../img/post/computer-network/3-3.jpg"></p><p>当数据是由可打印的 ASCII 码组成的文本文件时，其中可打印的有 95  个，而不可打印的控制字符有 33 个。</p><p>请注意，SOH 和 EOT 都是控制字符的名称，它们的十六进制编码分别是01（二进制是00000001）和 04（二进制是00000100）。</p><p><img src="/../img/post/computer-network/3-4.jpg"></p><h3 id="1-2-2-透明传输"><a href="#1-2-2-透明传输" class="headerlink" title="1.2.2 透明传输"></a>1.2.<strong>2 透明传输</strong></h3><p>当传送的帧是用文本文件组成的帧时（文本文件中的字符都是从键盘上输入的），其数据部分显然不会出现像 SOH 或 EOT 这样的帧定界控制字符。可见不管从键盘上输入什么字符都可以放在这样的帧中传输过去，因此这样的传输就是透明传输。</p><p>但当数据部分是非 ASCII 码的文本文件时（如二进制代码的计算机程序或图像等），情况就不同了。如果数据中的某个字节的二进制代码恰好和 SOH 致 EOT 一致，就会发生错误：</p><p><img src="/../img/post/computer-network/3-5.jpg"></p><h3 id="1-2-3-差错检测"><a href="#1-2-3-差错检测" class="headerlink" title="1.2.3 差错检测"></a>1.2.<strong>3 差错检测</strong></h3><p><strong>比特差错：</strong>比特在传输过程中可能会产生差错，1 成 0，0 成 1。</p><p><strong>循环冗余检验 CRC：</strong>一种模2运算后的检错方法。</p><p>在数据链路层若仅仅使用循环冗余检验 CRC 差错检测技术，则只能做到对帧的无差错接受，即：“凡是接收端数据链路层接受的帧，我们都能以非常接近于1的概率认为这些帧在传输过程中没有产生差错”。</p><h1 id="2-点对点协议-PPP"><a href="#2-点对点协议-PPP" class="headerlink" title="2.点对点协议 PPP"></a>2.点对点协议 PPP</h1><h2 id="2-1-PPP-协议的特点"><a href="#2-1-PPP-协议的特点" class="headerlink" title="2.1 PPP 协议的特点"></a>2.1 PPP 协议的特点</h2><h3 id="2-1-1-PPP-协议应满足的需求"><a href="#2-1-1-PPP-协议应满足的需求" class="headerlink" title="2.1.1 PPP 协议应满足的需求"></a>2.1.1 <strong>PPP 协议应满足的需求</strong></h3><ol><li><strong>简单：</strong>对数据链路层的帧，不需要纠错，不需要序号，也不需要流量控制。</li><li><strong>封装成帧：</strong>必须规定特殊的字符作为帧定界符。</li><li><strong>透明性：</strong>透明传输。</li><li><strong>多种网络层协议：</strong>在同一条物理链路上同时支持多种网络层协议的运行。</li><li><strong>多种类型链路：</strong>除了要支持多种网络层的协议外，PPP 还必须能够在多种类型的链路上运行。</li><li><strong>差错检测：</strong>必须能够对接收端收到的帧进行检测</li><li><strong>检测链接状态：</strong>自动检测出链路是否处于正常工作状态。</li><li><strong>最大传送单元：</strong>设置 MTU 最大传送单元。</li><li><strong>网络层地址协商：</strong>PPP协议必须提供一种机制使通信的两个网络层的实体能够通过协商知道或能够配置彼此的网络层地址。</li><li><strong>数据压缩协商：</strong>必须提供一种方法来协商使用数据压缩算法。</li></ol><h3 id="2-1-2-PPP-协议的组成"><a href="#2-1-2-PPP-协议的组成" class="headerlink" title="2.1.2 PPP 协议的组成"></a>2.1.<strong>2 PPP 协议的组成</strong></h3><ol><li>一个将 IP 数据报封装到串行链路的方法。PPP 既支持异步链路（无奇偶检验的8比特数据），也支持面向比特的同步链路。</li><li>一个用来建立、配置和测试数据链路连接的链路控制协议 LCP（Link ControlProtocol）。</li><li>一套网络控制协议 NCP (Network Control Protocol），其中的每一个协议支持不同的网络层协议，如 IP、OSI 的网络层、DECnet，以及AppleTalk 等。</li></ol><h2 id="2-2-PPP-协议的帧格式"><a href="#2-2-PPP-协议的帧格式" class="headerlink" title="2.2 PPP 协议的帧格式"></a>2.2 PPP 协议的帧格式</h2><p><img src="/../img/post/computer-network/3-6.jpg"></p><table><thead><tr><th>F</th><th>标志字段</th></tr></thead><tbody><tr><td>A</td><td>地址字段</td></tr><tr><td>C</td><td>标志字段</td></tr></tbody></table><p>当信息字段中出现和标志字段一样的比特 (0x7E) 组合时，就必须采取一些措施：</p><h3 id="2-2-1-字节填充"><a href="#2-2-1-字节填充" class="headerlink" title="2.2.1 字节填充"></a>2.2.<strong>1 字节填充</strong></h3><p>当 PPP 使用异步传输时，把每一个 0x7DE 转变成 2 字节序列 0x7D, 0x5D。</p><p>若信息字段中出现 ASCII 码的控制字符（即数值小于0x20的字符），则在该字符前加 0x7D。</p><h3 id="2-2-2-零比特填充"><a href="#2-2-2-零比特填充" class="headerlink" title="2.2.2 零比特填充"></a>2.2.<strong>2 零比特填充</strong></h3><p>当 PPP 使用同步传输（在 SONET&#x2F;SDH 链路）时，只要发现有 5 个连续 1，则立即填入一个 0。</p><h2 id="2-3-PPP-协议的工作状态"><a href="#2-3-PPP-协议的工作状态" class="headerlink" title="2.3 PPP 协议的工作状态"></a>2.3 PPP 协议的工作状态</h2><p>PPP 链路的起始和终止状态永远是<strong>链路静止状态</strong>。</p><p><img src="/../img/post/computer-network/3-7.jpg"></p><h1 id="3-使用广播信道的数据链路层"><a href="#3-使用广播信道的数据链路层" class="headerlink" title="3.使用广播信道的数据链路层"></a>3.使用广播信道的数据链路层</h1><h2 id="3-1-局域网的数据链路层"><a href="#3-1-局域网的数据链路层" class="headerlink" title="3.1 局域网的数据链路层"></a>3.1 局域网的数据链路层</h2><h3 id="3-1-1-局域网最主要的特点"><a href="#3-1-1-局域网最主要的特点" class="headerlink" title="3.1.1 局域网最主要的特点"></a>3.1.<strong>1 局域网最主要的特点</strong></h3><p>网络为一个单位所拥有，且地理范围和站点数目均有限。</p><h3 id="3-1-2-局域网一些主要优点"><a href="#3-1-2-局域网一些主要优点" class="headerlink" title="3.1.2 局域网一些主要优点"></a>3.1.<strong>2 局域网一些主要优点</strong></h3><ol><li>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。</li><li>便于系统的扩展和逐渐演变，各设备的位置可灵活调整和改变。</li><li>提高了系统的可靠性（reliability）、可用性（availability）和生存性（survivability）。</li></ol><h3 id="3-1-3-局域网按网络拓扑进行分类"><a href="#3-1-3-局域网按网络拓扑进行分类" class="headerlink" title="3.1.3 局域网按网络拓扑进行分类"></a>3.1.<strong>3 局域网按网络拓扑进行分类</strong></h3><p><img src="/../img/post/computer-network/3-8.jpg"></p><h3 id="3-1-4-局域网的共享信道"><a href="#3-1-4-局域网的共享信道" class="headerlink" title="3.1.4 局域网的共享信道"></a>3.1.<strong>4 局域网的共享信道</strong></h3><p>局域网使用频分、时分、波分、码分复用等，代价较高不合适。所以使用动态媒体接入控制，即多点接入。</p><h3 id="3-1-5-动态媒体接入控制（多点接入）"><a href="#3-1-5-动态媒体接入控制（多点接入）" class="headerlink" title="3.1.5 动态媒体接入控制（多点接入）"></a>3.1.5 <strong>动态媒体接入控制（多点接入）</strong></h3><p>特点是信道并非在用户通信时固定分配给用户。</p><ol><li><strong>随机接入：</strong>特点是所有的用户可随机地发送信息。但如果恰巧有两个或更多的用户在同一时刻发送信息，那么在共享媒体上就要产生碰撞（即发生了冲突)，使得这些用户的发送都失败。因此，必须有解决碰撞的网络协议（CSMA&#x2F;CD）。</li><li><strong>受控接入：</strong>特点是用户不能随机地发送信息而必须服从一定的控制。这类的典型代表有分散控制的令牌环局域网和集中控制的多点线路探询（polling），或称为轮询。</li></ol><p>随机接入的以太网将被重点讨论。受控接入则由于目前在局域网中使用得较少。</p><h3 id="3-1-6-以太网的两个标准"><a href="#3-1-6-以太网的两个标准" class="headerlink" title="3.1.6 以太网的两个标准"></a>3.1.6 <strong>以太网的两个标准</strong></h3><table><thead><tr><th></th><th>DIX Ethernet V2</th><th>802.3</th></tr></thead><tbody><tr><td>推出</td><td>DEC、因特尔、施乐</td><td>IEEE</td></tr><tr><td>时间</td><td>1980年</td><td>1983年</td></tr></tbody></table><p>太网的两个标准 DIX Ethernet V2 与 IEEE 的 802.3 标准只有很小的差别，因此很多人也常把 802.3 局域网简称为“以太网”。</p><p>严格上：</p><ul><li><strong>以太网：</strong>DIX Ethernet V2 标准的局域网</li><li><strong>802.3：</strong>802.3 标准的局域网</li></ul><h3 id="3-1-7-适配器的作用"><a href="#3-1-7-适配器的作用" class="headerlink" title="3.1.7 适配器的作用"></a>3.1.7 <strong>适配器的作用</strong></h3><p>计算机与外界局域网的连接是通过通信适配器（adapter）进行的。适配器本来是在主机箱内插入的一块网络接口板，这种接口板又称为网络接口卡 NIC（Network Interface Card）或简称为“网卡”。</p><blockquote><p>💡 由于现在计算机主板上都已经嵌入了这种适配器，不再使用单独的网卡了，因此适配器这个术语更准确。</p></blockquote><p>适配器和局域网之间的通信是通过电缆或双绞线以串行传输方式进行的，而适配器和计算机之间的通信则是通过计算机主板上的IO总线以并行传输方式进行的。</p><p><img src="/../img/post/computer-network/3-9.jpg"></p><h2 id="3-2-CSMA-x2F-CD-协议"><a href="#3-2-CSMA-x2F-CD-协议" class="headerlink" title="3.2 CSMA&#x2F;CD 协议"></a>3.2 CSMA&#x2F;CD 协议</h2><ol><li>载波监听多点接入&#x2F;碰撞检测 CSMA&#x2F;CD</li><li>以太网发送的数据都使用曼彻斯特编码。</li></ol><p><strong>CSMA&#x2F;CD 要点：</strong></p><ul><li>多点接入：总线型网络</li><li>载波监听：不停的检测信道</li><li>碰撞检测：边发送边监听，也叫冲突检测</li></ul><p><img src="/../img/post/computer-network/3-10.jpg"></p><p>显然，CSMA&#x2F;CD 一个站不可能同时进行发送和接收（但必须边发送边监听信道)。因此使用CSMA&#x2F;CD协议的以太网不可能进行全双工通信而只能进行双向交替通信(半双工通信)。</p><p>以太网使用截断二进制指数退避（truncated binary exponential backoff）算法来确定碰撞后重传的时机。截断二进制指数退避算法并不复杂。这种算法让发生碰撞的站在停止发送数据后，不是等待信道变为空闲后就立即再发送数据，而是推迟（这叫做退避）一个随机的时间。这点很容易理解，因为如果几个发生碰撞的站都在监听信道，那么都会同时发现信道变成了空闲。如果大家都同时再重新发送，那么肯定又会发生碰撞。</p><blockquote><p>💡 凡长度小于64字节的帧都是由于冲突而异常中止的无效帧。</p></blockquote><h2 id="3-3-使用集线器的星型拓扑"><a href="#3-3-使用集线器的星型拓扑" class="headerlink" title="3.3 使用集线器的星型拓扑"></a>3.3 使用集线器的星型拓扑</h2><p><strong>集线器的特点：</strong></p><ol><li>逻辑上仍是一个总线网，用 CSMA&#x2F;CD 协议，同一时刻至多只允许一个站发送数据。</li><li>一个集线器有许多接口。</li><li>工作在物理层，每个接口仅仅简单的转发比特。</li><li>采用了专门的芯片，进行自适应串音回波抵消。</li></ol><p><img src="/../img/post/computer-network/3-11.jpg"></p><h2 id="3-4-以太网的信道利用率"><a href="#3-4-以太网的信道利用率" class="headerlink" title="3.4 以太网的信道利用率"></a>3.4 以太网的信道利用率</h2><p>一个站在发送帧时出现了碰撞。经过一个争用期 $2τ$ 后（$τ$是以太网单程端到端传播时延），可能又出现了碰撞。这样经过若干个争用期后，一个站发送成功了。</p><p><img src="/../img/post/computer-network/3-12.jpg"></p><p>要提高以太网的信道利用率，就必须减小 $τ$ 与 $T0$  之比。在以太网中定义了参数 $a$，它是以太网单程端到端时延 $τ$ 与帧的发送时间 $T0$ 之比：</p><p>$$<br>a&#x3D;\dfrac{τ}{T_0}<br>$$</p><p>当 $a→0$ 时，表示只要一发生碰撞，就立即可以检测出来，并立即停止发送，因而信道资源被浪费的时间非常非常少。反之，参数 $a$ 越大，表明争用期所占的比例越大，使得信道利用率明显降低。</p><h2 id="3-5-以太网的-MAC-层"><a href="#3-5-以太网的-MAC-层" class="headerlink" title="3.5 以太网的 MAC 层"></a>3.5 以太网的 MAC 层</h2><h3 id="3-5-1-MAC-层的硬件地址"><a href="#3-5-1-MAC-层的硬件地址" class="headerlink" title="3.5.1 MAC 层的硬件地址"></a>3.5.1 <strong>MAC 层的硬件地址</strong></h3><p>MAC地址，即硬件地址、物理地址。</p><h3 id="3-5-2-MAC-帧的格式"><a href="#3-5-2-MAC-帧的格式" class="headerlink" title="3.5.2 MAC 帧的格式"></a>3.5.<strong>2 MAC 帧的格式</strong></h3><p>DIX Ethernet V2 标准：</p><p><img src="/../img/post/computer-network/3-13.jpg"></p><blockquote><p>💡 首部没有帧长度（或数据长度）字段，但是可以通过曼彻斯特编码送完毕后接口上的电压也就不再变化了，这样就能确定数据字段的结束位置。</p></blockquote><h1 id="4-拓展的以太网"><a href="#4-拓展的以太网" class="headerlink" title="4.拓展的以太网"></a>4.拓展的以太网</h1><h2 id="4-1-在物理层拓展以太网"><a href="#4-1-在物理层拓展以太网" class="headerlink" title="4.1 在物理层拓展以太网"></a>4.1 在物理层拓展以太网</h2><p>扩展主机和集线器之间的距离的一种简单方法就是使用光纤（通常是一对光纤）和一对光纤调制解调器。</p><p><img src="/../img/post/computer-network/3-14.jpg"></p><p>如果使用多个集线器，就可以连接成覆盖更大范围的多级星形结构的以太网。</p><p><img src="/../img/post/computer-network/3-15.jpg"></p><p><strong>好处：</strong></p><ol><li>使这个学院不同系的以太网上的计算机能够进行跨系的通信。</li><li>扩大了以太网覆盖的地理范围。</li></ol><p><strong>缺点：</strong></p><ol><li>把多个碰撞域变成一个碰撞域。</li><li>不同系用不同以太网技术就不能用集线器连接。</li></ol><h2 id="4-2-在数据链路层拓展以太网"><a href="#4-2-在数据链路层拓展以太网" class="headerlink" title="4.2 在数据链路层拓展以太网"></a>4.2 在数据链路层拓展以太网</h2><h3 id="4-2-1-以太网交换机的特点"><a href="#4-2-1-以太网交换机的特点" class="headerlink" title="4.2.1 以太网交换机的特点"></a>4.2.<strong>1 以太网交换机的特点</strong></h3><ol><li>实质是一个多接口的网桥。</li><li>独占传输媒体，无碰撞地传输数据。</li><li>即插即用，交换表通过自学习算法自动逐渐建立。</li><li>速率超软件网桥，性能超集线器。</li></ol><h3 id="4-2-2-以太网交换机的自学习功能"><a href="#4-2-2-以太网交换机的自学习功能" class="headerlink" title="4.2.2 以太网交换机的自学习功能"></a>4.2.<strong>2 以太网交换机的自学习功能</strong></h3><p>查找交换表，如果有，就不再进行广播。</p><p><img src="/../img/post/computer-network/3-16.jpg"></p><p>但有时为了增加网络的可靠性，在使用以太网交换机组网时，往往会增加一些冗余的链路。</p><h3 id="4-2-3-从总线以太网到星型以太网"><a href="#4-2-3-从总线以太网到星型以太网" class="headerlink" title="4.2.3 从总线以太网到星型以太网"></a>4.2.<strong>3 从总线以太网到星型以太网</strong></h3><p>总线以太网使用 CSMA&#x2F;CD 协议，以半双工方式工作。</p><p>以太网交换机不使用共享总线，没有碰撞问题，因此不使用 CSMA&#x2F;CD 协议，而是以全双工方式工作，但是帧结构未改变，仍然采用以太网的帧结构。</p><h2 id="4-3-虚拟局域网"><a href="#4-3-虚拟局域网" class="headerlink" title="4.3 虚拟局域网"></a>4.3 虚拟局域网</h2><p>虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组，而这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机属于哪一个 VLAN。</p><blockquote><p>💡 虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。</p></blockquote><p>例如，计算机 $B_1$~$B_3$ 同属于虚拟局域网 VLAN2。当 $B_1$ 向工作组内成员发送数据时，$B_2$ 和 $B_3$ 将会收到广播的信息，$A_1$ 、$A_2$ 和 $C_1$ 都不会收到。</p><p><img src="/../img/post/computer-network/3-17.jpg"></p><p>VLAN 的以太网帧的首部增加了4个字节。最后的 12 位是该虚拟局域网 VLAN 标识符 VID，它唯一地标志了这个以太网帧属于哪一个 VLAN。</p><p><img src="/../img/post/computer-network/3-18.jpg"></p><h1 id="5-高速以太网"><a href="#5-高速以太网" class="headerlink" title="5.高速以太网"></a>5.高速以太网</h1><h2 id="5-1-100BASE-T-以太网"><a href="#5-1-100BASE-T-以太网" class="headerlink" title="5.1 100BASE-T 以太网"></a>5.1 100BASE-T 以太网</h2><p>100BASE-T 是在双绞线上传送 100 Mbit&#x2F;s 基带信号的星形拓扑以太网，仍使用 IEEE802.3 的 CSMA&#x2F;CD 协议。</p><h2 id="5-2-吉比特以太网"><a href="#5-2-吉比特以太网" class="headerlink" title="5.2 吉比特以太网"></a>5.2 吉比特以太网</h2><p>吉比特以太网的标准 IEEE 802.3z 有以下几个特点：</p><ol><li>允许在1 Gbit&#x2F;s 下以全双工和半双工两种方式工作。</li><li>使用 IEEE 802.3 协议规定的帧格式。</li><li>在半双工方式下使用 CSMA&#x2F;CD 协议，而在全双工方式不使用 CSMA&#x2F;CD 协议。</li><li>与 10BASE-T 和 100BASE-T 技术向后兼容。</li></ol><h2 id="5-3-10吉比特以太网和更快的以太网"><a href="#5-3-10吉比特以太网和更快的以太网" class="headerlink" title="5.3 10吉比特以太网和更快的以太网"></a>5.3 10吉比特以太网和更快的以太网</h2><p>10GE 的帧格式与 10 Mbit&#x2F;s，100 Mbit&#x2F;s 和 1Gbit&#x2F;s 以太网的帧格式完全相同，并保留了 802.3 标准规定的以太网最小帧长和最大帧长。这就使用户在将其已有的以太网进行升级时，仍能和较低速率的以太网很方便地通信。</p><p>10GE 只工作在全双工方式，因此不存在争用问题，当然也不使用 CSMA&#x2F;CD 协议。这就使得 10GE 的传输距离大大提高了（因为不再受必须进行碰撞检测的限制）。</p><h2 id="5-4-使用以太网进行宽带接入"><a href="#5-4-使用以太网进行宽带接入" class="headerlink" title="5.4 使用以太网进行宽带接入"></a>5.4 使用以太网进行宽带接入</h2><p>把 PPP 协议中的 PPP 帧再封装到以太网中来传输。这就是 1999 年公布的 PPPoE（PPP over Ethernet），意思是“在以太网上运行 PPP”。现在的光纤宽带接入 FTTx 都要使用PPPoE的方式进行接入。</p>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>课本</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机网络 第二章：物理层</title>
    <link href="/computer-network-2/"/>
    <url>/computer-network-2/</url>
    
    <content type="html"><![CDATA[<h1 id="1-物理层的基本概念"><a href="#1-物理层的基本概念" class="headerlink" title="1.物理层的基本概念"></a>1.物理层的基本概念</h1><p>物理层协议称为物理层规程，实际上是物理层协议。</p><ol><li><strong>机械特性：</strong>接线器形状和尺寸、引脚数目和排列、固定和锁定装置等；</li><li><strong>电气特性：</strong>接口电缆的各条线上的电压范围；</li><li><strong>功能特性：</strong>某条线上的某一电平的电压的意义；</li><li><strong>过程特性：</strong>对于不同功能的各种可能事件的出现顺序；</li></ol><h1 id="2-数据通信的基础知识"><a href="#2-数据通信的基础知识" class="headerlink" title="2.数据通信的基础知识"></a>2.数据通信的基础知识</h1><h2 id="2-1-数据通信系统模型"><a href="#2-1-数据通信系统模型" class="headerlink" title="2.1 数据通信系统模型"></a>2.1 数据通信系统模型</h2><p><strong>一个数据通信系统可划分为三大部分：</strong></p><ol><li><strong>源系统</strong>（或发送端、发送方)</li><li><strong>传输系统</strong>（或传输网络）</li><li><strong>目的系统</strong>（或接收端、接收方)</li></ol><p><img src="/../img/post/computer-network/2-1.jpg"></p><p><strong>源系统一般包括以下两个部分：</strong></p><ul><li><strong>源点（source）：</strong>源点设备产生要传输的数据，例如，从计算机的键盘输入汉字，计算机产生输出的数字比特流。源点又称为源站，或信源。</li><li><strong>发送器：</strong>通常源点生成的数字比特流要通过发送器编码后才能够在传输系统中进行传输。典型的发送器就是调制器。</li></ul><p><strong>目的系统一般也包括以下两个部分：</strong></p><ul><li><strong>接收器：</strong>接收传输系统传送过来的信号，并把它转换为能够被目的设备处理的信息。典型的接收器就是解调器，它把来自传输线路上的模拟信号进行解调，提取出在发送端置入的消息，还原出发送端产生的数字比特流。</li><li><strong>终点（destination）：</strong>终点设备从接收器获取传送来的数字比特流，然后把信息输出（例如，把汉字在计算机屏幕上显示出来)。终点又称为目的站，或信宿。</li></ul><h2 id="2-2-有关信道的几个基本概念"><a href="#2-2-有关信道的几个基本概念" class="headerlink" title="2.2 有关信道的几个基本概念"></a>2.2 有关信道的几个基本概念</h2><p><strong>从通信的双方信息交互的方式来看，有以下三种基本方式：</strong></p><ul><li>单项通信（单工通信）</li><li>双向交替通信（半双工通信）</li><li>双向同时通信（全双工通信）</li></ul><h3 id="2-2-1-常用编码方式"><a href="#2-2-1-常用编码方式" class="headerlink" title="2.2.1 常用编码方式"></a>2.2.1 常用编码方式</h3><p><img src="/../img/post/computer-network/2-2.jpg"></p><ul><li><strong>不归零制：</strong>正电平代表1，负电平代表0。</li><li><strong>归零制：</strong>正脉冲代表1，负脉冲代表0。</li><li><strong>曼彻斯特编码：</strong>位周期中心的向上跳变代表0，位周期中心的向下跳变代表1。但也可反过来定义。</li><li><strong>差分曼彻斯特编码：</strong>在每一位的中心处始终都有跳变。位开始边界有跳变代表0，而位开始边界没有跳变代表1。</li></ul><h3 id="2-2-2-常用编码方式"><a href="#2-2-2-常用编码方式" class="headerlink" title="2.2.2 常用编码方式"></a>2.2.2 常用编码方式</h3><p><img src="/../img/post/computer-network/2-3.jpg"></p><ul><li>调幅（AM）即载波的振幅随基带数字信号而变化。</li><li>调频（FM）即载波的频率随基带数字信号而变化。</li><li>调相（PM）即载波的初始相位随基带数字信号而变化。</li></ul><h3 id="2-2-3-信道的极限容量"><a href="#2-2-3-信道的极限容量" class="headerlink" title="2.2.3 信道的极限容量"></a>2.2.3 信道的极限容量</h3><p>在1948年，信息论的创始人香农（Shannon）推导出了著名的香农公式。香农公式指出：信道的极限信息传输速率是</p><p>$$<br>信噪比&#x3D;\dfrac{S}{N}&#x3D;\dfrac{信号平均功率}{噪声平均功率}<br>$$</p><p>$$<br>C &#x3D; W×log_2(1+S&#x2F;N)（bit&#x2F;s）<br>$$</p><p>香农公式表明，信道的带宽或信道中的信噪比越大，信息的极限传输速率就越高。意义在于：<strong>只要信息传输速率低于信道的极限信息传输速率，就一定存在某种办法来实现无差错的传输。</strong></p><h1 id="3-物理层下面的传输媒体"><a href="#3-物理层下面的传输媒体" class="headerlink" title="3.物理层下面的传输媒体"></a>3.物理层下面的传输媒体</h1><p>传输媒体也称为传输介质或传输媒介，它就是数据传输系统中在发送器和接收器之间的物理通路。</p><p>可分为两大类：</p><ul><li><strong>引型传输媒体：</strong>电磁波被引导沿着固体媒体传播</li><li><strong>非导引型传输媒体：</strong>指自由空间</li></ul><h2 id="3-1-引型传输媒体"><a href="#3-1-引型传输媒体" class="headerlink" title="3.1 引型传输媒体"></a>3.1 <strong>引型传输媒体</strong></h2><h3 id="3-1-1-双绞线"><a href="#3-1-1-双绞线" class="headerlink" title="3.1.1 双绞线"></a>3.1.1 双绞线</h3><p>双绞线也称为双扭线，是最古老但又是最常用的传输媒体。把两根互相绝缘的铜导线并排放在一起，然后用规则的方法绞合起来就构成了双绞线。绞合可减少对相邻导线的电磁干扰。使用双绞线最多的地方就是到处都有的电话系统。</p><p><img src="/../img/post/computer-network/2-4.jpg"></p><h3 id="3-1-2-同轴电缆"><a href="#3-1-2-同轴电缆" class="headerlink" title="3.1.2 同轴电缆"></a>3.1.2 <strong>同轴电缆</strong></h3><p>同轴电缆由内导体铜质芯线（单股实心线或多股绞合线)、绝缘层、网状编织的外导体屏蔽层（也可以是单股的）以及保护塑料外层所组成。</p><p>由于外导体屏蔽层的作用，同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。</p><p><img src="/../img/post/computer-network/2-5.jpg"></p><h3 id="3-1-3-光缆（光纤）"><a href="#3-1-3-光缆（光纤）" class="headerlink" title="3.1.3 光缆（光纤）"></a>3.1.3 <strong>光缆（光纤）</strong></h3><p>光纤通信就是利用光导纤维（以下简称为光纤）传递光脉冲来进行通信。有光脉冲相当于1，而没有光脉冲相当于0。由于可见光的频率非常高，约为 10^8 MHz 的量级，因此一个光纤通信系统的传输带宽远远大于目前其他各种传输媒体的带宽。</p><p><img src="/../img/post/computer-network/2-6.jpg"></p><p>光纤不仅具有通信容量非常大的优点，而且还具有其他的一些特点：</p><ol><li>传输损耗小，中继距离长，对远距离传输特别经济。</li><li>抗雷电和电磁干扰性能好。这在有大电流脉冲干扰的环境下尤为重要。</li><li>无串音干扰，保密性好，也不易被窃听或截取数据。</li><li>体积小，重量轻。这在现有电缆管道已拥塞不堪的情况下特别有利。</li></ol><h2 id="3-2-非引型传输媒体"><a href="#3-2-非引型传输媒体" class="headerlink" title="3.2 非引型传输媒体"></a>3.2 <strong>非引型传输媒体</strong></h2><h3 id="3-2-1-短波通信（高频通信）"><a href="#3-2-1-短波通信（高频通信）" class="headerlink" title="3.2.1 短波通信（高频通信）"></a>3.2.1 <strong>短波通信（高频通信）</strong></h3><p>短波通信（即高频通信）主要是靠电离层的反射。但电离层的不稳定所产生的衰落现象和电离层反射所产生的多径效应，使得短波信道的通信质量较差，一般都是低速传输。</p><h3 id="3-2-2-无线电微波通信"><a href="#3-2-2-无线电微波通信" class="headerlink" title="3.2.2 无线电微波通信"></a>3.2.2 <strong>无线电微波通信</strong></h3><p>无线电微波通信在数据通信中占有重要地位。微波的频率范围为 300 MHz<del>300 GHz (波长 1m</del>1mm)，但主要使用2~40 GHz的频率范围。</p><p>微波在空间主要是直线传播。由于微波会穿透电离层而进入宇宙空间，因此它不像短波那样可以经电离层反射传播到地面上很远的地方。</p><p>传统的微波通信主要有两种方式，即<strong>地面微波接力通信</strong>和<strong>卫星通信</strong>。</p><h1 id="4-信道复用技术"><a href="#4-信道复用技术" class="headerlink" title="4.信道复用技术"></a>4.信道复用技术</h1><h2 id="4-1-常用的信道复用技术"><a href="#4-1-常用的信道复用技术" class="headerlink" title="4.1 常用的信道复用技术"></a>4.1 常用的信道复用技术</h2><h3 id="4-1-1-频分复用-FDM"><a href="#4-1-1-频分复用-FDM" class="headerlink" title="4.1.1 频分复用 FDM"></a>4.1.1 <strong>频分复用 FDM</strong></h3><p><img src="/../img/post/computer-network/2-7.jpg"></p><p>按频率分，通信过程中自始至终都占用这个频带，同时占用不同带宽资源。</p><h3 id="4-1-2-时分复用-TDM"><a href="#4-1-2-时分复用-TDM" class="headerlink" title="4.1.2 时分复用 TDM"></a>4.1.2 <strong>时分复用 TDM</strong></h3><p><img src="/../img/post/computer-network/2-8.jpg"></p><p>所有用户在不同时间占用同样的频率宽度。</p><h3 id="4-1-3-统计时分复用"><a href="#4-1-3-统计时分复用" class="headerlink" title="4.1.3 统计时分复用"></a>4.1.<strong>3 统计时分复用</strong></h3><p>统计时分复用是一种改进的时分复用，它能明显地提高信道的利用率。集中器常使用这种统计时分复用。</p><p><img src="/../img/post/computer-network/2-9.jpg"></p><p>当一个帧的数据放满了，就发送出去。因此，STDM 帧不是固定分配时隙，而是按需动念地分配时隙。</p><h3 id="4-1-4-波分复用"><a href="#4-1-4-波分复用" class="headerlink" title="4.1.4 波分复用"></a>4.1.4 <strong>波分复用</strong></h3><p>光的频分复用。</p><h3 id="4-1-5-码分复用"><a href="#4-1-5-码分复用" class="headerlink" title="4.1.5 码分复用"></a>4.1.5 <strong>码分复用</strong></h3><p>码分复用 CDM 是另一种共享信道的方法。实际上，人们更常用的名词是码分多址 CDMA（Code Division Multiple Access）。</p><p>每一个用户可以在同样的时间使用同样的频带进行通信。由于各用户使用经过特殊挑选的不同码型，因此各用户之间不会造成干扰。</p><p><img src="/../img/post/computer-network/2-10.jpg"></p><h1 id="5-数字传输系统"><a href="#5-数字传输系统" class="headerlink" title="5.数字传输系统"></a>5.数字传输系统</h1><p>为了解决<strong>速率标准不统一</strong>和<strong>不是同步传输</strong>的问题，美国在 1988 年首先推出了一个数字传输标准叫做同步光纤网 SONET（Synchronous Optical Network）。</p><p>SDH&#x2F;SONET 标准的制定，使北美、日本和欧洲这三个地区三种不同的数字传输体制在 STM-1 等级上获得了统一。这是第一次真正实现了数字传输体制上的世界性标准。现在 SDH&#x2F;SONET 标准已成为公认的新一代理想的传输网体制，因而对世界电信网络的发展具有重大的意义。SDH标准也适合于微波和卫星传输的技术体制。</p><h1 id="6-宽带接入技术"><a href="#6-宽带接入技术" class="headerlink" title="6.宽带接入技术"></a>6.宽带接入技术</h1><h2 id="6-1-ADSL技术"><a href="#6-1-ADSL技术" class="headerlink" title="6.1 ADSL技术"></a>6.1 <strong>ADSL技术</strong></h2><p>非对称数字用户线技术是用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带数字业务。0~4kHZ 低端频谱给传统电话，原先未利用的高端频谱给用户上网。非对称指下行远远大于上行带宽。ADSL 传输距离取决于数据率和用户线的线径（线径约小衰减越大）。</p><h2 id="6-2-光纤同轴混合网"><a href="#6-2-光纤同轴混合网" class="headerlink" title="6.2 光纤同轴混合网"></a>6.2 <strong>光纤同轴混合网</strong></h2><p>光纤同轴混合网是在有线电视网的基础上开发的一种居民宽带接入网，除可传送电视节目外，还能提供电诂、数据和其他宽带交互型业务。</p><h2 id="6-3-FTTx技术"><a href="#6-3-FTTx技术" class="headerlink" title="6.3 FTTx技术"></a>6.3 <strong>FTTx技术</strong></h2><p>光纤到户 FTTH 是最好的选择，把光纤一直铺设到用户家庭。只有光纤在进入家门后，才把光信号转为电信号，以获得最高的上网速率。</p><p>为了有效地利用光纤资源，在光纤干线和广大用户之间，还需要铺设一段中间的转换装置即光配线网 ODN（Optical Distribution Network），使得数十个家庭用户能够共享一根光纤干线。</p><p><img src="/../img/post/computer-network/2-11.jpg"></p><p>光线路终端 OLT（Optical Line Terminal）是连接到光纤干线的终端设备。OLT 把收到的下行数据发往无源的 1:N 光分路器，然后用广播方式向所有用户端的光网络单元ONU（Optical Network Unit）发送。典型的光分路器使用分路比是 1:32。</p>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>课本</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机网络 第一章：概述</title>
    <link href="/computer-network-1/"/>
    <url>/computer-network-1/</url>
    
    <content type="html"><![CDATA[<h1 id="1-计算机网络在信息时代中的作用"><a href="#1-计算机网络在信息时代中的作用" class="headerlink" title="1.计算机网络在信息时代中的作用"></a>1.计算机网络在信息时代中的作用</h1><p>21世纪的重要特征：数字化、网络化、信息化、以网络为核心的信息时代。</p><p>互联网有两个重要基本特点：连通性、共享</p><ul><li><strong>连通性：</strong>用户终端都彼此直接联通一样；</li><li><strong>资源共享：</strong>信息、软件和硬件共享；</li></ul><p>互联网+代表一种新的经济形态，有正面，也有负面影响，但负面影响毕竟还是次要的。</p><h1 id="2-互联网概述"><a href="#2-互联网概述" class="headerlink" title="2.互联网概述"></a>2.互联网概述</h1><h2 id="2-1-网络的网络"><a href="#2-1-网络的网络" class="headerlink" title="2.1 网络的网络"></a>2.1 网络的网络</h2><p>计算机网络（简称网络）由若干结点（node）和链接这些节点的链路（link）组成。网络中的结点可以是计算机、集线器、路由器等。</p><p><img src="/../img/post/computer-network/1-1.jpg"></p><p>网络把许多计算机连接在一起，而互联网则把许多网络通过路由器连接在一起。与网络相连的计算机常称为主机。</p><h2 id="2-2-互联网基础结构发展的三个阶段"><a href="#2-2-互联网基础结构发展的三个阶段" class="headerlink" title="2.2 互联网基础结构发展的三个阶段"></a>2.2 互联网基础结构发展的三个阶段</h2><p>互联网的基础结构大体上经历了三个阶段的演进。但这三个阶段在时间上的划分并非截然分开而是由部分重叠的，这是因为网络的演进是逐渐的。</p><ol><li>1983年 TCP&#x2F;IP 协议成立 ARPANET 上的标准协议，是所有使用 TCP&#x2F;IP 协议的计算机都能利用互联网通信，因而人们把 1983 年作为互联网的诞生时间。</li><li>建立了三级结构的互联网。分为主干网、地区网和校园网（或企业网）。</li><li>逐渐形成了多层次 ISP 结构的互联网。（ISP 指互联网服务提供商）</li></ol><p>ISP 根据服务覆盖面积大小及 IP 地址数目不同，也分为主干 ISP、地区 ISP、本地 ISP。</p><p><img src="/../img/post/computer-network/1-2.jpg"></p><p>为了更快的转发分组，出现了互联网交换点（IXP），作用是允许两个网络直接相连并交换分组，而不惜要通过第三个网络来转发分组。</p><h2 id="2-3-互联网的标准化工作"><a href="#2-3-互联网的标准化工作" class="headerlink" title="2.3 互联网的标准化工作"></a>2.3 互联网的标准化工作</h2><p>1992 年互联网不再归美国政府管辖，因此成立了一个国际性组织，叫互联网协会（Internet Society）。</p><ul><li>互联网协会 ISOC<ul><li>互联网体系结构委员会 IAB<ul><li>互联网工程部 IETF（协议开发和标准化）</li><li>互联网研究部 IRTF（研究一些需要长期考虑的问题）</li></ul></li></ul></li></ul><p>制定互联网的正式标准要经过以下三个阶段：</p><ol><li><strong>互联网草案（Internet Draft）：</strong>互联网草案的有效期只有六个月。在这个既然段还不能算是 RFC 文档。</li><li><strong>建议标准（Proposed Standard）：</strong>从这个阶段开始就成为 RFC 文档。</li><li><strong>互联网标准（Internet Standard）：</strong>达到正式标准后，每个标准就分配到一个编号 STD xx。</li></ol><h1 id="3-互联网的组成"><a href="#3-互联网的组成" class="headerlink" title="3.互联网的组成"></a>3.互联网的组成</h1><p>互联网的拓扑结构虽然非常复杂，但是从其工作方式上看，可以划分为：</p><ol><li><strong>边缘部分：</strong>由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。</li><li><strong>核心部分：</strong>由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。</li></ol><p><img src="/../img/post/computer-network/1-3.jpg"></p><h2 id="3-1-互联网的边缘部分"><a href="#3-1-互联网的边缘部分" class="headerlink" title="3.1 互联网的边缘部分"></a>3.1 互联网的边缘部分</h2><p>这些主机称为端系统（end system），在网络边缘的端系统之间的通信通常可划分为两大类：</p><ol><li>客户-服务器方式（C&#x2F;S）</li><li>对等方式（P2P）</li></ol><h3 id="3-1-1-客户-服务器方式（C-x2F-S）"><a href="#3-1-1-客户-服务器方式（C-x2F-S）" class="headerlink" title="3.1.1 客户-服务器方式（C&#x2F;S）"></a>3.1.1 客户-服务器方式（C&#x2F;S）</h3><p>这种方式是互联网上最常用、传统的方式。</p><p><img src="/../img/post/computer-network/1-4.jpg"></p><p><strong>（1）客户程序：</strong></p><ol><li>被用户调用后运行，在通信时主动向远地服务器发起通信。因此，客户程序必须知道服务器程序的地址。</li><li>不需要特殊的硬件和分复杂的操作的操作系统。</li></ol><p><strong>（2）服务器程序：</strong></p><ol><li>一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。</li><li>系统启动后自动调用并一直运行，被动地等待客户的通信请求。因此，服务器程序不需要知道客户程序的地址。</li><li>一般要强大的硬件和高校的操作系统支持。</li></ol><h3 id="3-1-2-对等方式（P2P）"><a href="#3-1-2-对等方式（P2P）" class="headerlink" title="3.1.2 对等方式（P2P）"></a>3.1.2 对等方式（P2P）</h3><p>是指两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方。只要两台主机都运行了对等连接的软件（P2P），他们就可以进行平等的、对等的连接通信。这时，双方都可以下载对方已存储在硬盘中的共享文档。</p><p><img src="/../img/post/computer-network/1-5.jpg"></p><h2 id="3-2-互联网的核心部分"><a href="#3-2-互联网的核心部分" class="headerlink" title="3.2 互联网的核心部分"></a>3.2 互联网的核心部分</h2><p>在网络核心部分起特殊作用的是路由器（router），它是一种专用计算机（不能叫主机）。路由器是实现分组交换的关键构建，其任务是转发收到的分组，这是网路核心最重要的功能。</p><p><strong>1.电路交换的主要特点：</strong></p><p>在通话的全部时间内，通话的两个用户始终占用端到端的通信资源。</p><p><strong>2.分组交换的主要特点：</strong></p><p>分组交换采用存储转发技术，要发送的整块数据称为一个报文（message）。再发送前，先把较长的报文划分为一个个小数据段，每个小数据段前加上必要控制信息为首部（header），构成了一个分组（packet），分组也叫“包”，分组首部也叫“包头”。</p><p><img src="/../img/post/computer-network/1-6.jpg"></p><p>主机是为用户进行信息处理的，并且可以和其他主机通过网络交换信息。路由器则是用来转发分组的。路由器收到一个分组，先暂时存储以下，检查其首部，查找转发表，按照首部中的目的地址，找到合适的接口转发出去，把分组交给下一个路由器。</p><p><strong>3.分组交换的优点：</strong></p><ol><li><strong>高效：</strong>在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用。</li><li><strong>灵活：</strong>为每一个分组独立地选择最合适的转发路由</li><li><strong>迅速：</strong>以分组作为传送单位，可以不先建立连接就能向其他主机发送分组</li><li><strong>可靠：</strong>保证可靠性的网络协议;分布式多路由的分组交换网，使网络有很好的生存性</li></ol><p><strong>4.分组交换的问题：</strong></p><ol><li><strong>时延：</strong>分组在各路由器存储转发时需要排队，这就会造成一定的时延。</li><li><strong>开销：</strong>各分组必须携带的控制信息也造成了一定的开销（overhead）。整个分组交换网还需要专门的管理和控制机制。</li></ol><p><img src="/../img/post/computer-network/1-7.jpg"></p><p>若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。</p><p>报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性。</p><h1 id="4-计算机网络在我国的发展"><a href="#4-计算机网络在我国的发展" class="headerlink" title="4.计算机网络在我国的发展"></a>4.计算机网络在我国的发展</h1><p>1994年4月20日，我国用 64 kbit&#x2F;s 专线正式连入互联网。从此，我国被国际上正式承认为接入互联网的国家。同年5月中国科学院高能物理研究所设立了我国的第一个万维网服务器。同年9月中国公用计算机互联网 CHINANET 正式启动。</p><p>到目前为止，我国陆续建造了基于互联网技术并能够和互联网互连的多个全国范围的公用计算机网络，其中规模最大的就是下面这五个：</p><ol><li>中国电信互联网 CHINANET（原中国公用计算机互联网）</li><li>中国联通互联网 UNINET</li><li>中国移动互联网 CMNET</li><li>中国教育和科研计算机网 CERNET</li><li>中国科学技术网 CSTNET</li></ol><h1 id="5-计算机网络的类别"><a href="#5-计算机网络的类别" class="headerlink" title="5.计算机网络的类别"></a>5.计算机网络的类别</h1><h2 id="5-1-计算机网络的定义"><a href="#5-1-计算机网络的定义" class="headerlink" title="5.1 计算机网络的定义"></a>5.1 计算机网络的定义</h2><p>计算机网络的精确定义并未统一，关于计算机网络的较好的定义是：计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号)。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。</p><p>根据这个定义：</p><ol><li>计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机。</li><li>计算机网络并非专门用来传送数据，而是能够支持很多种的应用（包括今后可能出现的各种应用）。</li></ol><h2 id="5-2-几种不同类别的计算机网络"><a href="#5-2-几种不同类别的计算机网络" class="headerlink" title="5.2 几种不同类别的计算机网络"></a>5.2 几种不同类别的计算机网络</h2><p><strong>1.按照网络的作用范围进行分类</strong></p><ol><li><strong>广域网 WAN（Wide Area Network）：</strong>广域网的作用范围通常为几十到几千公里，因而有时也称为远程网（long haul network）。广域网是互联网的核心部分，其任务是通过长距离运送主机所发送的数据。</li><li><strong>城域网 MAN（Metropolitan Area Network）：</strong>城域网的作用范围一般是一个城市，可跨越几个街区甚至整个城市，其作用距离约为5 ~50 km。城域网可以为一个或几个单位所拥有，但也可以是一种公用设施，用来将多个局域网进行互连。目前很多城域网采用的是以太网技术，因此有时也常并入局域网的范围进行讨论。</li><li><strong>局域网 LAN（Local Area Network）：</strong>局域网一般用微型计算机或工作站通过高速通信线路相连（速率通常在10 Mbit&#x2F;s以上），但地理上则局限在较小的范围（如1 km左右）。在局域网发展的初期，一个学校或工厂往往只拥有一个局域网，但现在局域网已非常广泛地使用，学校或企业大都拥有许多个互连的局域网（这样的网络常称为校园网或企业网）。</li><li><strong>个人区域网 PAN（Personal Area Network）：</strong>个人区域网就是在个人工作的地方把属于个人使用的电子设备用无线技术连接起来的网络，因此也常称为无线个人区域网 WPAN (Wireless PAN)，其范围很小。</li></ol><h1 id="6-计算机网络的性能"><a href="#6-计算机网络的性能" class="headerlink" title="6.计算机网络的性能"></a>6.计算机网络的性能</h1><h2 id="6-1-计算机网络的性能指标"><a href="#6-1-计算机网络的性能指标" class="headerlink" title="6.1 计算机网络的性能指标"></a>6.1 计算机网络的性能指标</h2><p><strong>1.速率</strong></p><p>速率的单位是 bit&#x2F;s（或 bps）。计算机发送出的信号都是数字形式的，1字节等于8比特，所以当我们将带宽换算成文件传输速度时需要除以8。</p><p><strong>2.带宽</strong></p><p>带宽用来表示网络中某通道传送数据的能力。网络带宽表示在单位时间内网络中的某信道所能通过的“最高数据率”，单位是数据率的单位 bit&#x2F;s，是“比特每秒”。</p><p><strong>3.吞吐量</strong></p><p>吞吐量表示在单位时间内通过某个网络（或信道、接口）的实际的数据量。吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。</p><p>显然，吞吐量受网络的带宽或网络的额定速率的限制。例如，对于一个1Gbit&#x2F;s的以太网，就是说其额定速率是1Gbit&#x2F;s，那么这个数值也是该以太网的吞吐量的绝对上限值。因此，对1Gbit&#x2F;s 的以太网，其实际的吞吐量可能也只有100 Mbit&#x2F;s，或甚至更低，并没有达到其额定速率。请注意，有时吞吐量还可用每秒传送的字节数或帧数来表示。</p><p><strong>4.时延</strong></p><p>时延（delay）是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。时延是个很重要的性能指标，它有时也称为延迟或迟延。由以下几个不同的部分组成的：</p><p><strong>（1）发送时延：</strong>是主机或路由器发送数据帧所需要的时。</p><p>$$<br>发送时延&#x3D;\dfrac{数据帧长度 bit}{发送速率 bit&#x2F;s}<br>$$</p><p><strong>（2）传播时延：</strong>传播时延是电磁波在信道中传播一定的距离需要花费的时间。</p><p>$$<br>传播时延&#x3D;\dfrac{信道长度 m}{电磁波在信道上的速率 m&#x2F;s}<br>$$</p><ul><li>真空：3.0×10^8 m&#x2F;s</li><li>铜：2.3×10^8 m&#x2F;s</li><li>光纤：2.0×10^8 m&#x2F;s</li></ul><p><strong>（3）处理时延：</strong>主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等。</p><p><strong>（4）排队时延：</strong>分组在经过网络传输时，要经过许多路由器。但分组在进人路出奋后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待。</p><p>$$<br>总时延&#x3D;发送时延+传播时延+处理时延+排队时延<br>$$</p><p><img src="/../img/post/computer-network/1-8.jpg"></p><p>对于高速网络链路，<strong>我们提高的仅仅是数据的发送速率而不是比特在链路上的传播速率。</strong></p><p><strong>提高数据的发送速率只是减小了数据的发送时延。</strong></p><p><strong>5.时延带宽积</strong></p><p>$$<br>时延带宽积&#x3D;传播时延×带宽<br>$$</p><p>表示链路能够容纳多少个比特。</p><p><strong>6.往返时间 RTT</strong></p><p>$$<br>发送时间&#x3D;\dfrac{数据长度}{发送速率}<br>$$</p><p>$$<br>有效数据率&#x3D;\dfrac{数据长度}{发送时间+RTT}<br>$$</p><p>是一个重要的性能指标。</p><p><strong>7.利用率</strong></p><p><strong>（1）信道利用率：</strong>某信道有百分之几的时间是被利用的。</p><p><strong>（2）网络利用率：</strong>全网络的信道利用率的加权平均值。</p><p>信道利用率并非越高越好。这是因为，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。</p><p>$$<br>D&#x3D;\dfrac{D_{0}}{1-U}<br>$$</p><p><img src="/../img/post/computer-network/1-9.jpg"></p><p>这里 U 是网络的利用率，数值在0到1之间。当网络的利用率达到其容量的1&#x2F;2时，时延就要加倍。特别值得注意的就是：当网络的利用率接近最大值1时，网络的时延就趋于无穷大。</p><p>因此一些拥有较大主干网的 ISP 通常控制信道利用率不超过50%。如果超过了就要准备扩容，增大线路的带宽。</p><h2 id="6-2-计算机网络的非性能特征"><a href="#6-2-计算机网络的非性能特征" class="headerlink" title="6.2 计算机网络的非性能特征"></a>6.2 计算机网络的非性能特征</h2><ol><li><strong>费用：</strong>网络的价格。</li><li><strong>质量：</strong>网络的质量取决于网络中所有构件的质量，以及这些构件是怎样组成网络的。</li><li><strong>标准化：</strong>网络的硬件和软件的设计既可以按照通用的国际标准，也可以遵循特定的专用网络标准。</li><li><strong>可靠性：</strong>可靠性与网络的质量和性能都有密切关系。</li><li><strong>可拓展性和可升级性：</strong>在构造网络时就应当考虑到今后可能会需要扩展（即规模扩大）和升级（即性能和版本的提高)。</li><li><strong>易于管理和维护：</strong>网络如果没有良好的管理和维护，就很难达到和保持所设计的性能。</li></ol><h1 id="7-计算机网络体系结构"><a href="#7-计算机网络体系结构" class="headerlink" title="7.计算机网络体系结构"></a>7.计算机网络体系结构</h1><h2 id="7-1-计算机网络体系结构的形成"><a href="#7-1-计算机网络体系结构的形成" class="headerlink" title="7.1 计算机网络体系结构的形成"></a>7.1 计算机网络体系结构的形成</h2><p>OSI 试图达到一种理想境界，即全球计算机网络都遵循这个统一标准，但由于基于 TCP&#x2F;IP 的互联网已抢先在全球相当大的范围成功地运行了。</p><h2 id="7-2-协议与划分层次"><a href="#7-2-协议与划分层次" class="headerlink" title="7.2 协议与划分层次"></a>7.2 协议与划分层次</h2><p>我们并不想让文件传送模块完成全部工作的细节，这样会使文件传送模块过于复杂，所以分层。</p><p><strong>分层的好处：</strong></p><ol><li>各层之间是独立的</li><li>灵活性好</li><li>结构上可分割开</li><li>易于实现和维护</li><li>能促进标准化工作</li></ol><h2 id="7-3-具有五层协议的体系结构"><a href="#7-3-具有五层协议的体系结构" class="headerlink" title="7.3 具有五层协议的体系结构"></a>7.3 具有五层协议的体系结构</h2><p><img src="/../img/post/computer-network/1-10.jpg"></p><table><thead><tr><th>应用层</th><th>体系结构中的最高层，通过应用进程间的交互来完成特定网络应用</th></tr></thead><tbody><tr><td>运输层</td><td>两台主机中进程之间的通信提供通用的数据传输服务</td></tr><tr><td>网络层</td><td>为分组交换网上的不同主机提供通信服务</td></tr><tr><td>数据链路层</td><td>把网络层下来的IP数据包组装成帧，在链路上发送</td></tr><tr><td>物理层</td><td>传送比特</td></tr></tbody></table><p><img src="/../img/post/computer-network/1-11.jpg"></p><h2 id="7-4-实体、协议、服务和服务访问点"><a href="#7-4-实体、协议、服务和服务访问点" class="headerlink" title="7.4 实体、协议、服务和服务访问点"></a>7.4 实体、协议、服务和服务访问点</h2><ol><li><strong>实体：</strong>任何可发送或接收信息的硬件或软件进程。</li><li><strong>协议：</strong>控制对等实体之间的通信规则，是水平的。</li><li><strong>服务：</strong>由下层通过层间接口向上层提供的功能，是垂直的。</li><li><strong>服务访问点：</strong>同一系统中相邻两层的实体进行交互的地方。</li></ol><p>协议必须把所有不利的条件事先都估计到，而不能假定一切都是正常的和非常理想的。想的。</p>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>课本</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
